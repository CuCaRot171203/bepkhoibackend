2025-04-07 14:50:51.838 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 14:50:51.991 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 14:50:51.993 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 14:50:52.079 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 14:50:52.080 +07:00 [INF] Hosting environment: Development
2025-04-07 14:50:52.081 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 14:50:52.318 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 14:50:52.449 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 134.0743ms
2025-04-07 14:50:52.468 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 14:50:52.471 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.8941ms
2025-04-07 14:50:52.660 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 14:50:52.695 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.9200ms
2025-04-07 14:50:52.725 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 14:50:52.749 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 24.2156ms
2025-04-07 14:51:02.236 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus?sortBy=ProductId&sortDirection=asc - -
2025-04-07 14:51:02.855 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API)'
2025-04-07 14:51:02.881 +07:00 [INF] Route matched with {action = "GetAllMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:51:03.821 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:51:04.646 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:51:04.730 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:51:04.744 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API) in 1859.3531ms
2025-04-07 14:51:04.746 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API)'
2025-04-07 14:51:04.750 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus?sortBy=ProductId&sortDirection=asc - - - 200 - application/json;+charset=utf-8 2513.6449ms
2025-04-07 14:51:11.763 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - -
2025-04-07 14:51:11.767 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API)'
2025-04-07 14:51:11.768 +07:00 [INF] Route matched with {action = "GetAllMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:51:11.775 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:51:11.783 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:51:11.786 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:51:11.787 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API) in 17.8939ms
2025-04-07 14:51:11.789 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuAsync (BepKhoiBackend.API)'
2025-04-07 14:51:11.790 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - - - 200 - application/json;+charset=utf-8 27.0655ms
2025-04-07 14:51:20.003 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - -
2025-04-07 14:51:20.006 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:51:20.012 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:51:20.046 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:51:20.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:51:20.103 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:51:20.116 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:51:20.120 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 107.3708ms
2025-04-07 14:51:20.121 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:51:20.122 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - - - 200 - application/json;+charset=utf-8 119.6549ms
2025-04-07 14:53:49.535 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 14:53:49.675 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 14:53:49.675 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 14:53:49.717 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 14:53:49.770 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 14:53:49.771 +07:00 [INF] Hosting environment: Development
2025-04-07 14:53:49.772 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 14:53:49.846 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 130.8323ms
2025-04-07 14:53:49.862 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 14:53:49.862 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 14:53:49.865 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.0479ms
2025-04-07 14:53:49.883 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.4821ms
2025-04-07 14:53:50.129 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 14:53:50.154 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 24.8850ms
2025-04-07 14:53:57.028 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - -
2025-04-07 14:53:57.580 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:53:57.598 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:53:58.522 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:53:59.225 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:53:59.331 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:53:59.348 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:53:59.362 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 1759.4983ms
2025-04-07 14:53:59.364 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:53:59.368 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - - - 200 - application/json;+charset=utf-8 2340.0980ms
2025-04-07 14:54:59.248 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&isActive=false&productNameOrId=Goi - -
2025-04-07 14:54:59.253 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:54:59.254 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:54:59.262 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:54:59.298 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Status] = @__isActive_Value_0)
ORDER BY [m].[Product_id]
2025-04-07 14:54:59.310 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Status] = @__isActive_Value_0)
ORDER BY [m].[Product_id]
2025-04-07 14:54:59.312 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:54:59.313 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 57.7149ms
2025-04-07 14:54:59.314 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:54:59.315 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&isActive=false&productNameOrId=Goi - - - 404 - application/json;+charset=utf-8 66.9111ms
2025-04-07 14:55:03.538 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&isActive=true&productNameOrId=Goi - -
2025-04-07 14:55:03.541 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:55:03.542 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:55:03.583 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:55:03.588 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Status] = @__isActive_Value_0)
ORDER BY [m].[Product_id]
2025-04-07 14:55:03.591 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__isActive_Value_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Status] = @__isActive_Value_0)
ORDER BY [m].[Product_id]
2025-04-07 14:55:03.592 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:55:03.593 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 50.2638ms
2025-04-07 14:55:03.595 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:55:03.595 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&isActive=true&productNameOrId=Goi - - - 200 - application/json;+charset=utf-8 57.0093ms
2025-04-07 14:55:05.936 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&categoryId=2&isActive=true&productNameOrId=Goi - -
2025-04-07 14:55:05.937 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:55:05.937 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:55:05.939 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:55:05.950 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryId_Value_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE (([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_category_id] = @__categoryId_Value_0)) AND ([m].[Status] = @__isActive_Value_1)
ORDER BY [m].[Product_id]
2025-04-07 14:55:05.968 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__categoryId_Value_0='?' (DbType = Int32), @__isActive_Value_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE (([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_category_id] = @__categoryId_Value_0)) AND ([m].[Status] = @__isActive_Value_1)
ORDER BY [m].[Product_id]
2025-04-07 14:55:05.970 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:55:05.971 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 33.06ms
2025-04-07 14:55:05.972 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:55:05.973 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&categoryId=2&isActive=true&productNameOrId=Goi - - - 200 - application/json;+charset=utf-8 36.8060ms
2025-04-07 14:55:56.192 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 14:55:56.296 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 14:55:56.298 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 14:55:56.378 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 14:55:56.385 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 14:55:56.386 +07:00 [INF] Hosting environment: Development
2025-04-07 14:55:56.386 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 14:55:56.479 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 104.0795ms
2025-04-07 14:55:56.493 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 14:55:56.493 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 14:55:56.495 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.8467ms
2025-04-07 14:55:56.513 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.4560ms
2025-04-07 14:55:56.847 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 14:55:56.876 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 29.3947ms
2025-04-07 14:56:11.571 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=1 - -
2025-04-07 14:56:11.606 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:11.625 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:12.280 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:12.652 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_id] = @__id_0)
ORDER BY [m].[Product_id]
2025-04-07 14:56:12.721 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_id] = @__id_0)
ORDER BY [m].[Product_id]
2025-04-07 14:56:12.729 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:12.735 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 1105.3601ms
2025-04-07 14:56:12.736 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:12.744 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=1 - - - 404 - application/json;+charset=utf-8 1172.7564ms
2025-04-07 14:56:16.186 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=2 - -
2025-04-07 14:56:16.191 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:16.193 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:16.201 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:16.208 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_id] = @__id_0)
ORDER BY [m].[Product_id]
2025-04-07 14:56:16.256 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ([m].[Product_id] = @__id_0)
ORDER BY [m].[Product_id]
2025-04-07 14:56:16.269 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:16.277 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 83.274ms
2025-04-07 14:56:16.278 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:16.279 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=2 - - - 200 - application/json;+charset=utf-8 92.5814ms
2025-04-07 14:56:23.517 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=goi - -
2025-04-07 14:56:23.520 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:23.520 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:23.559 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:23.571 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:56:23.592 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__searchValue_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ((@__searchValue_0 LIKE N'') OR (CHARINDEX(@__searchValue_0, LOWER([m].[Product_name])) > 0))
ORDER BY [m].[Product_id]
2025-04-07 14:56:23.594 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:23.594 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 72.8815ms
2025-04-07 14:56:23.595 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:23.595 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=goi - - - 404 - application/json;+charset=utf-8 78.2809ms
2025-04-07 14:56:28.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - -
2025-04-07 14:56:28.303 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:28.304 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:28.305 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:28.307 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:56:28.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchValue_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ((@__searchValue_0 LIKE N'') OR (CHARINDEX(@__searchValue_0, LOWER([m].[Product_name])) > 0))
ORDER BY [m].[Product_id]
2025-04-07 14:56:28.312 +07:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:28.313 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 8.4141ms
2025-04-07 14:56:28.313 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:28.314 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=Goi - - - 404 - application/json;+charset=utf-8 13.0382ms
2025-04-07 14:56:36.815 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=G%E1%BB%8Fi - -
2025-04-07 14:56:36.816 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:36.818 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:36.820 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:36.825 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:56:36.830 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchValue_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ((@__searchValue_0 LIKE N'') OR (CHARINDEX(@__searchValue_0, LOWER([m].[Product_name])) > 0))
ORDER BY [m].[Product_id]
2025-04-07 14:56:36.833 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:36.835 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 15.9896ms
2025-04-07 14:56:36.836 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:36.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=G%E1%BB%8Fi - - - 200 - application/json;+charset=utf-8 21.5326ms
2025-04-07 14:56:42.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=g%E1%BB%8Fi - -
2025-04-07 14:56:42.015 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:42.016 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:42.017 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:42.021 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:56:42.023 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__searchValue_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ((@__searchValue_0 LIKE N'') OR (CHARINDEX(@__searchValue_0, LOWER([m].[Product_name])) > 0))
ORDER BY [m].[Product_id]
2025-04-07 14:56:42.025 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:42.028 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 11.4182ms
2025-04-07 14:56:42.029 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:42.029 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=g%E1%BB%8Fi - - - 200 - application/json;+charset=utf-8 16.1652ms
2025-04-07 14:56:48.194 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=g - -
2025-04-07 14:56:48.195 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:48.196 +07:00 [INF] Route matched with {action = "GetAllMenuCustomer", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllMenuCustomerAsync(System.String, System.String, System.Nullable`1[System.Int32], System.Nullable`1[System.Boolean], System.String) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-07 14:56:48.198 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 14:56:48.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE [m].[IsDelete] = CAST(0 AS bit)
ORDER BY [m].[Product_id]
2025-04-07 14:56:48.203 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchValue_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id], [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Menu] AS [m]
LEFT JOIN [Product_image] AS [p] ON [m].[Product_id] = [p].[Product_id]
WHERE ([m].[IsDelete] = CAST(0 AS bit)) AND ((@__searchValue_0 LIKE N'') OR (CHARINDEX(@__searchValue_0, LOWER([m].[Product_name])) > 0))
ORDER BY [m].[Product_id]
2025-04-07 14:56:48.204 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuCustomerDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 14:56:48.205 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API) in 8.7993ms
2025-04-07 14:56:48.206 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.GetAllMenuCustomerAsync (BepKhoiBackend.API)'
2025-04-07 14:56:48.207 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Menu/get-all-menus-customer?sortBy=ProductId&sortDirection=asc&productNameOrId=g - - - 200 - application/json;+charset=utf-8 13.0494ms
2025-04-07 15:07:52.022 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:07:52.128 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:07:52.129 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:07:52.211 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:07:52.213 +07:00 [INF] Hosting environment: Development
2025-04-07 15:07:52.214 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:07:52.580 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:07:52.678 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 99.3474ms
2025-04-07 15:07:52.693 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:07:52.693 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:07:52.696 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.0312ms
2025-04-07 15:07:52.713 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.0649ms
2025-04-07 15:07:53.042 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:07:53.067 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 24.6135ms
2025-04-07 15:08:45.099 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 340
2025-04-07 15:08:45.121 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:08:45.121 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:08:45.138 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:08:45.155 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:08:45.822 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:08:46.190 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:08:46.234 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (Size = 100), @p14='?' (Size = 255), @p15='?' (DbType = Int32), @p16='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:08:46.272 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0c32fa59-3bdf-419c-bec7-547be0ec5e60
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0c32fa59-3bdf-419c-bec7-547be0ec5e60
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:08:46.283 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 1123.2737ms
2025-04-07 15:08:46.285 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:08:46.287 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:08:46.292 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 340 - 500 - application/json 1193.0233ms
2025-04-07 15:13:38.280 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:13:38.379 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:13:38.380 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:13:38.463 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:13:38.465 +07:00 [INF] Hosting environment: Development
2025-04-07 15:13:38.465 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:13:38.844 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:13:38.940 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 97.6101ms
2025-04-07 15:13:38.953 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:13:38.953 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:13:38.956 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.7935ms
2025-04-07 15:13:38.974 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.0410ms
2025-04-07 15:13:39.281 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:13:39.303 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 22.7039ms
2025-04-07 15:14:30.655 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341
2025-04-07 15:14:30.676 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:14:30.677 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:14:30.695 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:14:30.712 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:14:31.379 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:14:31.688 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:14:31.764 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:14:31.780 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f9f73ebe-3f5d-41ec-844c-2e7c60f86116
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f9f73ebe-3f5d-41ec-844c-2e7c60f86116
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:14:31.791 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 1073.2055ms
2025-04-07 15:14:31.792 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:14:31.794 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:14:31.799 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341 - 500 - application/json 1144.8292ms
2025-04-07 15:14:48.914 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:14:49.211 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:14:49.212 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:14:49.360 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:14:49.361 +07:00 [INF] Hosting environment: Development
2025-04-07 15:14:49.361 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:14:50.001 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:14:50.208 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 211.0170ms
2025-04-07 15:14:50.223 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:14:50.229 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.1909ms
2025-04-07 15:14:50.407 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:14:50.468 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 61.0452ms
2025-04-07 15:14:50.492 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:14:50.526 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 34.2474ms
2025-04-07 15:15:28.055 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 334
2025-04-07 15:15:28.094 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:15:28.095 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:15:28.182 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:15:28.205 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:17:12.623 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:17:13.194 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:17:56.607 +07:00 [ERR] Failed executing DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:17:56.640 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b928a5a-e8ca-4815-8397-06009b0a0794
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0b928a5a-e8ca-4815-8397-06009b0a0794
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:17:56.750 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 148539.3354ms
2025-04-07 15:17:56.754 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:17:56.804 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:17:56.816 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 334 - 500 - application/json 148760.3510ms
2025-04-07 15:22:03.748 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:22:04.101 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:22:04.101 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:22:04.252 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:22:04.253 +07:00 [INF] Hosting environment: Development
2025-04-07 15:22:04.254 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:22:04.547 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:22:04.752 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 209.5164ms
2025-04-07 15:22:04.769 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:22:04.775 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 5.9011ms
2025-04-07 15:22:04.949 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:22:04.995 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 46.4503ms
2025-04-07 15:22:05.021 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:22:05.046 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 25.1617ms
2025-04-07 15:22:24.780 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341
2025-04-07 15:22:24.815 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:22:24.816 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:22:24.882 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:22:24.904 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:22:29.588 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:22:30.176 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:22:37.977 +07:00 [ERR] Failed executing DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:22:38.008 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee67d99e-5313-4c98-9ea3-509895b50d15
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee67d99e-5313-4c98-9ea3-509895b50d15
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:22:38.120 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 13211.3239ms
2025-04-07 15:22:38.123 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:22:38.173 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:22:38.186 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341 - 500 - application/json 13406.5548ms
2025-04-07 15:22:59.619 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:22:59.835 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:22:59.837 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:22:59.982 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:22:59.983 +07:00 [INF] Hosting environment: Development
2025-04-07 15:22:59.984 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:23:00.249 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:23:00.484 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 240.6489ms
2025-04-07 15:23:00.549 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:23:00.553 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.2527ms
2025-04-07 15:23:00.679 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:23:00.733 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.3566ms
2025-04-07 15:23:00.758 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:23:00.789 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 30.8943ms
2025-04-07 15:23:10.463 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341
2025-04-07 15:23:10.490 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:23:10.492 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:23:10.558 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:23:10.579 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:24:05.795 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 350
2025-04-07 15:24:05.860 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 350
2025-04-07 15:24:05.860 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:24:05.860 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341
2025-04-07 15:24:05.862 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:24:05.862 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:24:05.870 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:24:05.877 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:24:05.989 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:24:05.989 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:24:05.990 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:24:05.991 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:24:05.991 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:24:05.992 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:24:05.993 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:24:19.455 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 13459.3592ms
2025-04-07 15:24:19.461 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:24:19.474 +07:00 [ERR] Error: The request stream was aborted.
2025-04-07 15:24:19.479 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 350 - 500 - application/json 13685.8764ms
2025-04-07 15:24:20.112 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:24:20.112 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:24:20.112 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:24:20.730 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:24:20.730 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:24:20.730 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:24:40.178 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:24:44.387 +07:00 [ERR] Failed executing DbCommand (52ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:24:44.387 +07:00 [ERR] Failed executing DbCommand (52ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:25:03.030 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 15:25:03.090 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 57095.8507ms
2025-04-07 15:25:03.092 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:25:05.670 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1204d1d3-230c-4c32-aee3-305efa8c4fd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1204d1d3-230c-4c32-aee3-305efa8c4fd8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:25:05.670 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b2af1fff-1dfa-4f37-a0f7-753cf62c7659
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Order_det__Produ__236943A5". The conflict occurred in database "bepkhoi1", table "dbo.Menu", column 'Product_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b2af1fff-1dfa-4f37-a0f7-753cf62c7659
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-07 15:25:05.674 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 350 - 200 - application/json;+charset=utf-8 59814.9855ms
2025-04-07 15:25:05.869 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 59875.4953ms
2025-04-07 15:25:05.900 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:25:06.042 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:25:06.043 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 115461.9066ms
2025-04-07 15:25:06.044 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341 - 500 - application/json 60184.4521ms
2025-04-07 15:25:06.045 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:25:06.163 +07:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-04-07 15:25:06.173 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 341 - 500 - application/json 115710.3113ms
2025-04-07 15:31:07.956 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-07 15:31:08.054 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-07 15:31:08.056 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-07 15:31:08.152 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-07 15:31:08.153 +07:00 [INF] Hosting environment: Development
2025-04-07 15:31:08.153 +07:00 [INF] Content root path: D:\DOan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-07 15:31:08.188 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-07 15:31:08.296 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 110.6027ms
2025-04-07 15:31:08.306 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-07 15:31:08.309 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.8846ms
2025-04-07 15:31:08.492 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-07 15:31:08.514 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.3951ms
2025-04-07 15:31:08.552 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-07 15:31:08.579 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 27.1089ms
2025-04-07 15:31:43.325 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 332
2025-04-07 15:31:43.349 +07:00 [INF] CORS policy execution failed.
2025-04-07 15:31:43.350 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-07 15:31:43.367 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:31:43.384 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(BepKhoiBackend.BusinessObject.dtos.OrderDto.OrderCreateDTO) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-07 15:31:44.067 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-07 15:31:44.399 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 255), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order] ([Amount_due], [Created_time], [Customer_id], [Delivery_information_id], [Order_note], [Order_status_id], [Order_type_id], [Room_id], [Shipper_id], [Total_quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Order_id]
FROM [Order]
WHERE @@ROWCOUNT = 1 AND [Order_id] = scope_identity();
2025-04-07 15:31:44.435 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (Size = 100), @p14='?' (Size = 255), @p15='?' (DbType = Int32), @p16='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Order_detail] ([Order_id], [Price], [Product_id], [Product_name], [Product_note], [Quantity], [Status])
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT [Order_detail_id]
FROM [Order_detail]
WHERE @@ROWCOUNT = 1 AND [Order_detail_id] = scope_identity();
2025-04-07 15:31:44.454 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-07 15:31:44.460 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API) in 1070.6885ms
2025-04-07 15:31:44.461 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.CreateOrder (BepKhoiBackend.API)'
2025-04-07 15:31:44.465 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/orders/create-order-customer application/json 332 - 200 - application/json;+charset=utf-8 1140.3139ms
