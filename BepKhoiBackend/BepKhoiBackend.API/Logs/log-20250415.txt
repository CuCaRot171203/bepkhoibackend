2025-04-15 10:09:46.379 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:09:46.624 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:09:46.625 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:09:46.746 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:09:46.747 +07:00 [INF] Hosting environment: Development
2025-04-15 10:09:46.748 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:09:47.456 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:09:47.635 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 182.8405ms
2025-04-15 10:09:47.646 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:09:47.650 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.6649ms
2025-04-15 10:09:47.917 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:09:47.971 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.8076ms
2025-04-15 10:09:48.007 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:09:48.045 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 37.8650ms
2025-04-15 10:10:05.560 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:10:05.567 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 6.6640ms
2025-04-15 10:10:05.592 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:10:05.593 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 1.6115ms
2025-04-15 10:10:05.842 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:10:05.847 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 4.5588ms
2025-04-15 10:10:05.917 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:10:05.942 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 25.3696ms
2025-04-15 10:11:47.070 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:11:47.201 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:11:47.203 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:11:47.312 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:11:47.313 +07:00 [INF] Hosting environment: Development
2025-04-15 10:11:47.313 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:11:47.629 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:11:47.745 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 118.4802ms
2025-04-15 10:11:47.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:11:47.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:11:47.770 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.8443ms
2025-04-15 10:11:47.798 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.2133ms
2025-04-15 10:11:48.023 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:11:48.066 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 42.7024ms
2025-04-15 10:12:02.416 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:12:02.446 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:12:02.447 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:12:02.487 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:12:02.508 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:12:03.294 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:12:03.735 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id]
FROM [User] AS [u]
WHERE [u].[email] = @__email_0
2025-04-15 10:12:03.833 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 10:12:03.841 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1328.6896ms
2025-04-15 10:12:03.842 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:12:03.844 +07:00 [INF] Session started; Key:b6235136-138b-9975-0bb3-f30db371e4fe, Id:fa2f527c-5596-d83a-c65f-45f370ae1142
2025-04-15 10:12:03.847 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1431.0005ms
2025-04-15 10:12:15.995 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 10:12:16.005 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-15 10:12:16.012 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 10:12:16.014 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 18.4140ms
2025-04-15 10:12:46.988 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice - -
2025-04-15 10:12:46.990 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetAllInvoices (BepKhoiBackend.API)'
2025-04-15 10:12:46.993 +07:00 [INF] Route matched with {action = "GetAllInvoices", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BepKhoiBackend.BusinessObject.dtos.InvoiceDto.InvoiceDTO]] GetAllInvoices() on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-15 10:12:47.010 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:12:47.089 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM [Invoice] AS [i]
LEFT JOIN [Invoice_detail] AS [i0] ON [i].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [i].[Invoice_id]
2025-04-15 10:12:47.147 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.InvoiceDto.InvoiceDTO, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 10:12:47.156 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetAllInvoices (BepKhoiBackend.API) in 161.8965ms
2025-04-15 10:12:47.157 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetAllInvoices (BepKhoiBackend.API)'
2025-04-15 10:12:47.158 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice - - - 200 - application/json;+charset=utf-8 170.8026ms
2025-04-15 10:13:03.368 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:13:03.502 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:13:03.503 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:13:03.618 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:13:03.619 +07:00 [INF] Hosting environment: Development
2025-04-15 10:13:03.621 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:13:03.692 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:13:03.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 146.6167ms
2025-04-15 10:13:03.853 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:13:03.853 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:13:03.857 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.9153ms
2025-04-15 10:13:03.881 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.8033ms
2025-04-15 10:13:04.132 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:13:04.174 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 41.4738ms
2025-04-15 10:13:09.356 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 10:13:09.400 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API)'
2025-04-15 10:13:09.408 +07:00 [INF] Route matched with {action = "GetAllCustomers", controller = "Customer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BepKhoiBackend.BusinessObject.dtos.CustomerDto.CustomerDTO]] GetAllCustomers() on controller BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController (BepKhoiBackend.API).
2025-04-15 10:13:10.197 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:13:10.704 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Customer_id], [c].[Customer_name], [c].[isDelete], [c].[Phone], [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
FROM [Customer] AS [c]
LEFT JOIN [Invoice] AS [i] ON [c].[Customer_id] = [i].[Customer_id]
WHERE ([c].[isDelete] = CAST(0 AS bit)) OR ([c].[isDelete] IS NULL)
ORDER BY [c].[Customer_id]
2025-04-15 10:13:10.816 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.CustomerDto.CustomerDTO, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 10:13:10.826 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API) in 1412.1832ms
2025-04-15 10:13:10.828 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API)'
2025-04-15 10:13:10.832 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 200 - application/json;+charset=utf-8 1475.6527ms
2025-04-15 10:13:34.413 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:13:34.564 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:13:34.565 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:13:34.684 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:13:34.684 +07:00 [INF] Hosting environment: Development
2025-04-15 10:13:34.685 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:13:35.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:13:35.166 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 117.9522ms
2025-04-15 10:13:35.183 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:13:35.183 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:13:35.187 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.3174ms
2025-04-15 10:13:35.209 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.7875ms
2025-04-15 10:13:35.399 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:13:35.440 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 40.7376ms
2025-04-15 10:14:12.079 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:14:12.196 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:14:12.196 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:14:12.296 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:14:12.297 +07:00 [INF] Hosting environment: Development
2025-04-15 10:14:12.298 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:14:12.733 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:14:12.855 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 124.0098ms
2025-04-15 10:14:12.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:14:12.875 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:14:12.879 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.0334ms
2025-04-15 10:14:13.008 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 132.8185ms
2025-04-15 10:14:13.380 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:14:13.460 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.2826ms
2025-04-15 10:14:26.855 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:14:26.886 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:14:26.887 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:14:26.906 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:14:26.921 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:14:27.645 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:14:28.043 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id]
FROM [User] AS [u]
WHERE [u].[email] = @__email_0
2025-04-15 10:14:28.127 +07:00 [INF] Accessing expired session, Key:b6235136-138b-9975-0bb3-f30db371e4fe
2025-04-15 10:14:28.133 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 10:14:28.140 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1212.8582ms
2025-04-15 10:14:28.141 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:14:28.142 +07:00 [INF] Session started; Key:b6235136-138b-9975-0bb3-f30db371e4fe, Id:bca3ef14-759b-ae82-91e3-814d8d952fb7
2025-04-15 10:14:28.146 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1290.8147ms
2025-04-15 10:14:33.103 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 10:14:33.114 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (1)
2025-04-15 10:14:33.123 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 10:14:33.126 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 22.8049ms
2025-04-15 10:16:27.319 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:16:27.664 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:16:27.665 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:16:27.826 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:16:27.827 +07:00 [INF] Hosting environment: Development
2025-04-15 10:16:27.828 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:16:28.548 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:16:28.809 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 267.4663ms
2025-04-15 10:16:28.830 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:16:28.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 7.7004ms
2025-04-15 10:16:29.046 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:16:29.102 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 55.8006ms
2025-04-15 10:16:29.129 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:16:29.164 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 34.4031ms
2025-04-15 10:16:38.256 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:16:38.304 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:16:38.305 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:16:38.397 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:16:38.419 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:16:39.582 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:16:40.396 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id]
FROM [User] AS [u]
WHERE [u].[email] = @__email_0
2025-04-15 10:18:21.209 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:18:21.359 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:18:21.360 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:18:21.474 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:18:21.474 +07:00 [INF] Hosting environment: Development
2025-04-15 10:18:21.475 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:18:21.951 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:18:22.099 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 152.4864ms
2025-04-15 10:18:22.115 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:18:22.118 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.2848ms
2025-04-15 10:18:22.359 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:18:22.391 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 32.4934ms
2025-04-15 10:18:22.444 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:18:22.503 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 58.6886ms
2025-04-15 10:18:51.017 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:18:51.374 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:18:51.409 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:18:51.670 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:18:51.671 +07:00 [INF] Hosting environment: Development
2025-04-15 10:18:51.673 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:18:51.890 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:18:52.241 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 355.8558ms
2025-04-15 10:18:52.262 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:18:52.269 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.5278ms
2025-04-15 10:18:52.528 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:18:52.581 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 52.8238ms
2025-04-15 10:18:52.615 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:18:52.661 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 46.7700ms
2025-04-15 10:19:21.954 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:19:22.010 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:19:22.011 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:19:22.083 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:19:22.104 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:19:23.236 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:19:24.099 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id]
FROM [User] AS [u]
WHERE [u].[email] = @__email_0
2025-04-15 10:19:55.855 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:19:55.995 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:19:55.996 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:19:56.116 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:19:56.117 +07:00 [INF] Hosting environment: Development
2025-04-15 10:19:56.118 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:20:02.816 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:20:03.185 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:20:03.186 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:20:03.379 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:20:03.380 +07:00 [INF] Hosting environment: Development
2025-04-15 10:20:03.381 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:20:03.708 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:20:03.955 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 252.1369ms
2025-04-15 10:20:03.971 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:20:03.976 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 5.0041ms
2025-04-15 10:20:04.205 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:20:04.273 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.7109ms
2025-04-15 10:20:04.304 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:20:04.346 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 41.6861ms
2025-04-15 10:20:11.404 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:20:11.448 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:20:11.449 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:20:11.524 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:20:11.547 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:20:12.692 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:20:13.434 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id]
FROM [User] AS [u]
WHERE [u].[email] = @__email_0
2025-04-15 10:22:00.051 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 10:22:00.425 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 10:22:00.426 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 10:22:00.602 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 10:22:00.603 +07:00 [INF] Hosting environment: Development
2025-04-15 10:22:00.603 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 10:22:01.157 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 10:22:01.416 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 263.2131ms
2025-04-15 10:22:01.432 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 10:22:01.441 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 8.3859ms
2025-04-15 10:22:01.666 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 10:22:01.735 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.0528ms
2025-04-15 10:22:01.762 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 10:22:01.812 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 50.1161ms
2025-04-15 10:22:09.592 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 10:22:09.625 +07:00 [INF] CORS policy execution failed.
2025-04-15 10:22:09.625 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 10:22:09.687 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:22:09.706 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 10:22:10.828 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 10:22:11.645 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 10:22:23.827 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 10:22:23.889 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 14176.0693ms
2025-04-15 10:22:23.892 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 10:22:23.895 +07:00 [INF] Session started; Key:216b0efa-f3b5-47db-5dad-214d8d376c6f, Id:6d609ecc-613b-99f9-635b-80eb805bcefa
2025-04-15 10:22:24.573 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 14981.0302ms
2025-04-15 10:22:30.392 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 10:22:30.410 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-15 10:22:30.418 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 10:22:30.419 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 27.4183ms
2025-04-15 10:22:32.880 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 10:22:32.882 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-15 10:22:32.883 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 10:22:32.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 4.1399ms
2025-04-15 10:22:33.408 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 11:09:49.589 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 11:09:49.755 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 11:09:49.757 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 11:09:49.874 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 11:09:49.875 +07:00 [INF] Hosting environment: Development
2025-04-15 11:09:49.876 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 11:09:50.840 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 11:09:51.095 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 262.1923ms
2025-04-15 11:09:51.141 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 11:09:51.147 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.3705ms
2025-04-15 11:09:51.476 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 11:09:51.550 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.0463ms
2025-04-15 11:09:51.615 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 11:09:51.676 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 60.9645ms
2025-04-15 11:10:46.574 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 11:10:47.082 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 11:10:47.083 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 11:10:47.295 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 11:10:47.296 +07:00 [INF] Hosting environment: Development
2025-04-15 11:10:47.297 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 11:10:48.159 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 11:10:48.478 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 323.8685ms
2025-04-15 11:10:48.499 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 11:10:48.508 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 8.0309ms
2025-04-15 11:10:48.762 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 11:10:48.866 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 103.4607ms
2025-04-15 11:10:48.898 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 11:10:48.973 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 75.2595ms
2025-04-15 11:11:03.091 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 11:11:03.160 +07:00 [INF] CORS policy execution failed.
2025-04-15 11:11:03.161 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 11:11:03.267 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 11:11:03.294 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 11:11:15.651 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 11:11:16.724 +07:00 [INF] Executed DbCommand (103ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 11:12:05.421 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 11:12:05.478 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 62178.125ms
2025-04-15 11:12:05.481 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 11:12:05.484 +07:00 [INF] Session started; Key:a9fbea05-9efe-a3d3-121e-afdd6ce78378, Id:6f5db52d-39fd-4afe-a215-8c6df532e5e3
2025-04-15 11:12:07.440 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 64348.8608ms
2025-04-15 11:30:21.240 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-15 11:30:21.379 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-15 11:30:21.406 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-15 11:30:21.533 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 11:30:21.732 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-15 11:30:21.867 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-15 11:30:21.871 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 463.2507ms
2025-04-15 11:30:21.873 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-15 11:30:21.877 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 200 - text/plain;+charset=utf-8 638.8593ms
2025-04-15 11:30:29.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-15 11:30:30.013 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-15 11:30:30.017 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-15 11:30:30.149 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 11:30:30.190 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-15 11:30:30.200 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-15 11:30:30.203 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 176.0659ms
2025-04-15 11:30:30.205 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-15 11:30:30.206 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 200 - text/plain;+charset=utf-8 314.4143ms
2025-04-15 11:30:30.702 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/favicon.ico - -
2025-04-15 11:30:30.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/favicon.ico - - - 404 0 - 4.8719ms
2025-04-15 11:31:39.762 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=220000&vnp_BankCode=VNPAY&vnp_CardType=QRCODE&vnp_OrderInfo=1&vnp_PayDate=20250415113054&vnp_ResponseCode=24&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=0&vnp_TransactionStatus=02&vnp_TxnRef=638803134218351674&vnp_SecureHash=39b7e6baa82a8b8edc87c29527ab38c5937446b2c42471823859db9df1b6c5e61974c3aa8aff933d68e1dad3e8991c520f7726b4714b0ddc3175a50b4943d4d4 - -
2025-04-15 11:31:39.776 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-15 11:31:39.782 +07:00 [INF] Route matched with {action = "PaymentCallbackVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PaymentCallbackVnpay() on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-15 11:31:39.825 +07:00 [INF] Executing RedirectResult, redirecting to https://www.facebook.com/reel/639253061931440.
2025-04-15 11:31:39.826 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API) in 42.3013ms
2025-04-15 11:31:39.829 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-15 11:31:39.838 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=220000&vnp_BankCode=VNPAY&vnp_CardType=QRCODE&vnp_OrderInfo=1&vnp_PayDate=20250415113054&vnp_ResponseCode=24&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=0&vnp_TransactionStatus=02&vnp_TxnRef=638803134218351674&vnp_SecureHash=39b7e6baa82a8b8edc87c29527ab38c5937446b2c42471823859db9df1b6c5e61974c3aa8aff933d68e1dad3e8991c520f7726b4714b0ddc3175a50b4943d4d4 - - - 302 0 - 77.3784ms
2025-04-15 11:49:29.028 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=220000&vnp_BankCode=VNPAY&vnp_CardType=QRCODE&vnp_OrderInfo=1&vnp_PayDate=20250415113212&vnp_ResponseCode=15&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=0&vnp_TransactionStatus=02&vnp_TxnRef=638803134218351674&vnp_SecureHash=80c67ad1a60667dffc1f98451daa8d3b20fae64471c511997364703c04c37bd17db9b451f45a35bc4d42f7430737421bb772d202cf70f06d4a4f8b9ffc743c77 - -
2025-04-15 11:49:29.049 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-15 11:49:29.050 +07:00 [INF] Route matched with {action = "PaymentCallbackVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PaymentCallbackVnpay() on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-15 11:49:29.052 +07:00 [INF] Executing RedirectResult, redirecting to https://www.facebook.com/reel/639253061931440.
2025-04-15 11:49:29.053 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API) in 1.587ms
2025-04-15 11:49:29.054 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-15 11:49:29.055 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=220000&vnp_BankCode=VNPAY&vnp_CardType=QRCODE&vnp_OrderInfo=1&vnp_PayDate=20250415113212&vnp_ResponseCode=15&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=0&vnp_TransactionStatus=02&vnp_TxnRef=638803134218351674&vnp_SecureHash=80c67ad1a60667dffc1f98451daa8d3b20fae64471c511997364703c04c37bd17db9b451f45a35bc4d42f7430737421bb772d202cf70f06d4a4f8b9ffc743c77 - - - 302 0 - 27.0552ms
2025-04-15 13:52:09.520 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:52:09.642 +07:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Span`1& arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(Type serviceType)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.<ConfigureApplication>b__27_0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-04-15 13:54:17.125 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:54:17.184 +07:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Span`1& arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(Type serviceType)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.<ConfigureApplication>b__27_0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-04-15 13:54:36.845 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:54:36.980 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 13:54:36.981 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 13:54:37.098 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 13:54:37.100 +07:00 [INF] Hosting environment: Development
2025-04-15 13:54:37.100 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 13:54:37.695 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 13:54:37.847 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 154.9188ms
2025-04-15 13:54:37.869 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 13:54:37.873 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.4374ms
2025-04-15 13:54:38.086 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 13:54:38.129 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 43.3096ms
2025-04-15 13:54:38.161 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 13:54:38.202 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 40.8742ms
2025-04-15 13:57:56.791 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:57:56.940 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 13:57:56.941 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 13:57:57.062 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 13:57:57.062 +07:00 [INF] Hosting environment: Development
2025-04-15 13:57:57.063 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 13:57:57.709 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 13:57:57.843 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 137.0366ms
2025-04-15 13:57:57.855 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 13:57:57.858 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.6181ms
2025-04-15 13:57:58.064 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 13:57:58.089 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.8183ms
2025-04-15 13:57:58.132 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 13:57:58.181 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 49.2684ms
2025-04-15 13:58:39.617 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 13:58:39.655 +07:00 [INF] CORS policy execution failed.
2025-04-15 13:58:39.656 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 13:58:39.669 +07:00 [ERR] Error: String reference not set to an instance of a String. (Parameter 's')
2025-04-15 13:58:39.671 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 400 - application/json 54.2146ms
2025-04-15 13:59:10.979 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:59:11.365 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 13:59:11.366 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 13:59:11.552 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 13:59:11.554 +07:00 [INF] Hosting environment: Development
2025-04-15 13:59:11.556 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 13:59:11.808 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 13:59:12.058 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 257.5484ms
2025-04-15 13:59:12.077 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 13:59:12.082 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.8142ms
2025-04-15 13:59:12.318 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 13:59:12.405 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 87.1368ms
2025-04-15 13:59:12.436 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 13:59:12.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 62.0223ms
2025-04-15 13:59:21.148 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 13:59:21.187 +07:00 [INF] CORS policy execution failed.
2025-04-15 13:59:21.188 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 13:59:50.570 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 13:59:50.685 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 13:59:50.686 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 13:59:50.820 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 13:59:50.821 +07:00 [INF] Hosting environment: Development
2025-04-15 13:59:50.822 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 13:59:50.847 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 13:59:50.980 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 135.7755ms
2025-04-15 13:59:50.993 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 13:59:50.996 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.4594ms
2025-04-15 13:59:51.250 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 13:59:51.289 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 38.8975ms
2025-04-15 13:59:51.333 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 13:59:51.386 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 53.0693ms
2025-04-15 13:59:58.113 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 13:59:58.142 +07:00 [INF] CORS policy execution failed.
2025-04-15 13:59:58.143 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 13:59:58.170 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 13:59:58.190 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 13:59:58.978 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 13:59:59.421 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 13:59:59.532 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 13:59:59.542 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1346.6483ms
2025-04-15 13:59:59.543 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 13:59:59.546 +07:00 [INF] Session started; Key:187ca9fd-d2c2-7527-92b0-9f0f7a90e339, Id:31105196-fa43-473d-5be2-75d618db0a27
2025-04-15 13:59:59.552 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1439.2466ms
2025-04-15 14:00:05.078 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 14:00:05.089 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-15 14:00:05.095 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 14:00:05.097 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 19.1228ms
2025-04-15 14:00:44.726 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 14:00:45.145 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 14:00:45.146 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 14:00:45.333 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 14:00:45.334 +07:00 [INF] Hosting environment: Development
2025-04-15 14:00:45.334 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 14:00:45.918 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:00:46.259 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 347.1921ms
2025-04-15 14:00:46.277 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:00:46.284 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.1669ms
2025-04-15 14:00:46.573 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:00:46.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 91.4283ms
2025-04-15 14:00:46.692 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:00:46.779 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 86.6065ms
2025-04-15 14:00:59.503 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 14:00:59.536 +07:00 [INF] CORS policy execution failed.
2025-04-15 14:00:59.538 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 14:00:59.610 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:00:59.630 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 14:01:14.142 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:01:15.040 +07:00 [INF] Executed DbCommand (72ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 14:01:35.407 +07:00 [INF] Accessing expired session, Key:187ca9fd-d2c2-7527-92b0-9f0f7a90e339
2025-04-15 14:10:00.786 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 14:10:00.914 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 14:10:00.915 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 14:10:01.018 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 14:10:01.019 +07:00 [INF] Hosting environment: Development
2025-04-15 14:10:01.020 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 14:10:01.693 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:10:01.851 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 161.0694ms
2025-04-15 14:10:01.867 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:10:01.871 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.7326ms
2025-04-15 14:10:02.116 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:10:02.153 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 36.9710ms
2025-04-15 14:10:02.306 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:10:02.344 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 37.9897ms
2025-04-15 14:10:20.033 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 14:10:20.058 +07:00 [INF] CORS policy execution failed.
2025-04-15 14:10:20.058 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 14:10:20.079 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:10:20.092 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 14:10:20.825 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:10:21.264 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 14:10:21.367 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 14:10:21.375 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1278.7084ms
2025-04-15 14:10:21.376 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:10:21.377 +07:00 [INF] Session started; Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604, Id:e3535f73-2974-2b27-36ec-4c0bf757284d
2025-04-15 14:10:21.380 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1346.9244ms
2025-04-15 14:13:13.077 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 14:13:13.212 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 14:13:13.213 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 14:13:13.319 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 14:13:13.320 +07:00 [INF] Hosting environment: Development
2025-04-15 14:13:13.322 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 14:13:13.753 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:13:13.880 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 129.1343ms
2025-04-15 14:13:13.900 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:13:13.900 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:13:13.904 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.9681ms
2025-04-15 14:13:13.925 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.4981ms
2025-04-15 14:13:14.212 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:13:14.259 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 46.2799ms
2025-04-15 14:13:26.073 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 14:13:26.107 +07:00 [INF] CORS policy execution failed.
2025-04-15 14:13:26.109 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 14:13:26.132 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:13:26.147 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 14:13:26.891 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:13:27.324 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 14:13:27.427 +07:00 [INF] Accessing expired session, Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604
2025-04-15 14:13:27.433 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 14:13:27.439 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1287.617ms
2025-04-15 14:13:27.440 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:13:27.441 +07:00 [INF] Session started; Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604, Id:6c8ec0bb-3bb0-de3f-2f40-88d6b16496d9
2025-04-15 14:13:27.444 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1371.5612ms
2025-04-15 14:13:42.270 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 14:13:42.283 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-15 14:13:42.290 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-15 14:13:42.292 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 401 0 - 22.0001ms
2025-04-15 14:14:44.522 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:14:44.544 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 22.3226ms
2025-04-15 14:14:44.854 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/favicon.ico - -
2025-04-15 14:14:44.857 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/favicon.ico - - - 404 0 - 2.8853ms
2025-04-15 14:18:23.119 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 14:18:23.297 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 14:18:23.298 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 14:18:23.410 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 14:18:23.411 +07:00 [INF] Hosting environment: Development
2025-04-15 14:18:23.411 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 14:18:23.789 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:18:23.913 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 126.5860ms
2025-04-15 14:18:23.932 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:18:23.932 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:18:23.936 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.7409ms
2025-04-15 14:18:23.960 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.4205ms
2025-04-15 14:18:24.334 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:18:24.383 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 49.0597ms
2025-04-15 14:18:38.626 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 14:18:38.655 +07:00 [INF] CORS policy execution failed.
2025-04-15 14:18:38.656 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 14:18:38.683 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:18:38.700 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 14:18:39.444 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:18:39.895 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 14:18:40.008 +07:00 [INF] Accessing expired session, Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604
2025-04-15 14:18:40.014 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 14:18:40.021 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1315.1916ms
2025-04-15 14:18:40.023 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:18:40.025 +07:00 [INF] Session started; Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604, Id:6db6a3f3-eb6d-58b5-2ef7-a9877011b6b9
2025-04-15 14:18:40.031 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1405.3660ms
2025-04-15 14:21:34.463 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 14:21:34.604 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 14:21:34.605 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 14:21:34.707 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 14:21:34.708 +07:00 [INF] Hosting environment: Development
2025-04-15 14:21:34.708 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 14:21:35.136 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:21:35.258 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 124.4560ms
2025-04-15 14:21:35.279 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:21:35.279 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:21:35.283 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.7720ms
2025-04-15 14:21:35.304 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.2942ms
2025-04-15 14:21:35.709 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:21:35.746 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 36.9385ms
2025-04-15 14:21:37.198 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 14:21:37.201 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 3.3844ms
2025-04-15 14:21:37.222 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 14:21:37.224 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 14:21:37.224 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 0.8861ms
2025-04-15 14:21:37.235 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.5839ms
2025-04-15 14:21:37.450 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 14:21:37.476 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 25.8571ms
2025-04-15 14:21:58.284 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56
2025-04-15 14:21:58.308 +07:00 [INF] CORS policy execution failed.
2025-04-15 14:21:58.309 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 14:21:58.331 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:21:58.344 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-15 14:21:59.047 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:21:59.500 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
WHERE [u].[email] = @__email_0
2025-04-15 14:21:59.604 +07:00 [INF] Accessing expired session, Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604
2025-04-15 14:21:59.610 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 14:21:59.616 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1267.7916ms
2025-04-15 14:21:59.618 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-15 14:21:59.619 +07:00 [INF] Session started; Key:0f0347d4-58ae-eb9d-c2b7-db7275b38604, Id:06de3d2d-f285-4787-f1c3-570c178d310c
2025-04-15 14:21:59.623 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 1338.7870ms
2025-04-15 14:22:21.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Customer - -
2025-04-15 14:22:21.720 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API)'
2025-04-15 14:22:21.722 +07:00 [INF] Route matched with {action = "GetAllCustomers", controller = "Customer"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BepKhoiBackend.BusinessObject.dtos.CustomerDto.CustomerDTO]] GetAllCustomers() on controller BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController (BepKhoiBackend.API).
2025-04-15 14:22:21.732 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 14:22:21.788 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Customer_id], [c].[Customer_name], [c].[isDelete], [c].[Phone], [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
FROM [Customer] AS [c]
LEFT JOIN [Invoice] AS [i] ON [c].[Customer_id] = [i].[Customer_id]
WHERE ([c].[isDelete] = CAST(0 AS bit)) OR ([c].[isDelete] IS NULL)
ORDER BY [c].[Customer_id]
2025-04-15 14:22:21.838 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BepKhoiBackend.BusinessObject.dtos.CustomerDto.CustomerDTO, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 14:22:21.843 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API) in 119.3015ms
2025-04-15 14:22:21.844 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.CustomerControllers.CustomerController.GetAllCustomers (BepKhoiBackend.API)'
2025-04-15 14:22:21.845 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Customer - - - 200 - application/json;+charset=utf-8 186.1361ms
2025-04-15 17:47:13.883 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 17:47:14.093 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 17:47:14.094 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 17:47:14.226 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 17:47:14.227 +07:00 [INF] Hosting environment: Development
2025-04-15 17:47:14.229 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 17:47:14.843 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 17:47:15.044 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 204.4785ms
2025-04-15 17:47:15.070 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 17:47:15.073 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.8664ms
2025-04-15 17:47:15.319 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 17:47:15.370 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 51.1024ms
2025-04-15 17:47:15.413 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 17:47:15.482 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 68.7349ms
2025-04-15 17:48:45.120 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryBqarkmSBlmoUXr7y 403738
2025-04-15 17:48:45.140 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:48:45.196 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:48:45.197 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:48:45.234 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:48:45.266 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:48:45.557 +07:00 [ERR] An unexpected error occurred while adding the menu.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu(CreateMenuDto menuDto) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\Controllers\MenuControllers\MenuController.cs:line 139
2025-04-15 17:48:45.591 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:48:45.598 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 326.2265ms
2025-04-15 17:48:45.600 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:48:45.607 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryBqarkmSBlmoUXr7y 403738 - 500 - application/json;+charset=utf-8 487.0826ms
2025-04-15 17:49:22.533 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryVI8CAOCNzLbj8Nec 403733
2025-04-15 17:49:22.534 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:49:22.543 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:49:22.545 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:49:22.547 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:49:22.549 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:49:22.575 +07:00 [ERR] An unexpected error occurred while adding the menu.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu(CreateMenuDto menuDto) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\Controllers\MenuControllers\MenuController.cs:line 139
2025-04-15 17:49:22.578 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:49:22.579 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 26.9163ms
2025-04-15 17:49:22.580 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:49:22.581 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryVI8CAOCNzLbj8Nec 403733 - 500 - application/json;+charset=utf-8 48.2903ms
2025-04-15 17:50:00.549 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryXtA9WoK5ZmQ8lRB6 403740
2025-04-15 17:50:00.550 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:50:00.552 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:50:00.553 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:50:00.555 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:50:00.556 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:50:00.574 +07:00 [ERR] An unexpected error occurred while adding the menu.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu(CreateMenuDto menuDto) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\Controllers\MenuControllers\MenuController.cs:line 139
2025-04-15 17:50:00.578 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:50:00.583 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 25.6786ms
2025-04-15 17:50:00.585 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:50:00.587 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryXtA9WoK5ZmQ8lRB6 403740 - 500 - application/json;+charset=utf-8 37.7892ms
2025-04-15 17:50:24.452 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryxkj8BWZ4tD8DYB5b 403748
2025-04-15 17:50:24.453 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:50:24.454 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:50:24.454 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:50:24.455 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:50:24.456 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:50:24.480 +07:00 [ERR] An unexpected error occurred while adding the menu.
System.NullReferenceException: Object reference not set to an instance of an object.
   at BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu(CreateMenuDto menuDto) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\Controllers\MenuControllers\MenuController.cs:line 139
2025-04-15 17:50:24.483 +07:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:50:24.485 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 27.6088ms
2025-04-15 17:50:24.487 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:50:24.489 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryxkj8BWZ4tD8DYB5b 403748 - 500 - application/json;+charset=utf-8 36.7494ms
2025-04-15 17:51:01.148 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 17:51:01.491 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 17:51:01.492 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 17:51:01.720 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 17:51:01.721 +07:00 [INF] Hosting environment: Development
2025-04-15 17:51:01.722 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 17:51:02.138 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 17:51:02.405 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 271.1116ms
2025-04-15 17:51:02.430 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 17:51:02.435 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.9685ms
2025-04-15 17:51:02.663 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 17:51:02.734 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 71.2134ms
2025-04-15 17:51:02.773 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 17:51:02.813 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 39.2932ms
2025-04-15 17:51:33.595 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryBcmhmUUSuAwl3t7t 313557
2025-04-15 17:51:33.615 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:51:33.717 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:51:33.718 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:51:33.823 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:51:33.866 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:53:06.909 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-15 17:53:07.038 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-15 17:53:07.040 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-15 17:53:07.149 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-15 17:53:07.150 +07:00 [INF] Hosting environment: Development
2025-04-15 17:53:07.152 +07:00 [INF] Content root path: C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-15 17:53:07.691 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-15 17:53:07.817 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 127.8475ms
2025-04-15 17:53:07.838 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-15 17:53:07.842 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.8326ms
2025-04-15 17:53:08.072 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-15 17:53:08.101 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 29.2761ms
2025-04-15 17:53:08.147 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-15 17:53:08.187 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 39.6731ms
2025-04-15 17:53:40.818 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundary26yjRdhBmU41VIJp 369772
2025-04-15 17:53:40.826 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:53:40.859 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:53:40.860 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:53:40.884 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:53:40.907 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:53:48.828 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:53:49.292 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:53:49.551 +07:00 [ERR] Failed executing DbCommand (32ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:53:49.572 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:53:49.582 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:53:49.613 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:53:49.621 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:53:49.631 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 8717.0633ms
2025-04-15 17:53:49.633 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:53:49.641 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundary26yjRdhBmU41VIJp 369772 - 400 - application/json;+charset=utf-8 8823.4621ms
2025-04-15 17:54:18.546 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryBLAjrGETZAuleRSu 57263
2025-04-15 17:54:18.547 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:54:18.553 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:54:18.554 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:54:18.556 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:18.556 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:54:19.506 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:54:19.515 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:54:19.523 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:54:19.526 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:54:19.533 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:54:19.538 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:54:19.539 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:54:19.540 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 982.5451ms
2025-04-15 17:54:19.541 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:19.542 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryBLAjrGETZAuleRSu 57263 - 400 - application/json;+charset=utf-8 996.6764ms
2025-04-15 17:54:35.640 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryG5k5yJkzHvut9Els 57269
2025-04-15 17:54:35.641 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:54:35.643 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:54:35.644 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:54:35.646 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:35.647 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:54:36.706 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:54:36.714 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:54:36.724 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:54:36.729 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:54:36.736 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:54:36.742 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:54:36.743 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:54:36.745 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 1097.073ms
2025-04-15 17:54:36.746 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:36.747 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryG5k5yJkzHvut9Els 57269 - 400 - application/json;+charset=utf-8 1106.3588ms
2025-04-15 17:54:40.629 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryzUhB1hKAUtJ5BkHa 57269
2025-04-15 17:54:40.631 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:54:40.633 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:54:40.633 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:54:40.634 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:40.635 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:54:41.562 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:54:41.567 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:54:41.573 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:54:41.578 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:54:41.583 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:54:41.589 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:54:41.590 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:54:41.591 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 954.8162ms
2025-04-15 17:54:41.592 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:41.593 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryzUhB1hKAUtJ5BkHa 57269 - 400 - application/json;+charset=utf-8 963.0964ms
2025-04-15 17:54:46.675 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryfORZVZWspufylmhy 1053
2025-04-15 17:54:46.676 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:54:46.678 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:54:46.679 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:54:46.680 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:46.681 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:54:46.683 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:54:46.688 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:54:46.696 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:54:46.698 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:54:46.704 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:54:46.707 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:54:46.708 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:54:46.709 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 27.0442ms
2025-04-15 17:54:46.709 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:46.710 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryfORZVZWspufylmhy 1053 - 400 - application/json;+charset=utf-8 34.8698ms
2025-04-15 17:54:48.933 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryuMlF3P8WjqMmzHct 1053
2025-04-15 17:54:48.934 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:54:48.936 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:54:48.936 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:54:48.937 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:48.938 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:54:48.940 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:54:48.944 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:54:48.951 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:54:48.953 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BepKhoiBackend.DataAccess.Models.bepkhoiContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-04-15 17:54:48.960 +07:00 [ERR] Database update error.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Menu__Product_ca__17F790F9". The conflict occurred in database "bepkhoi1", table "dbo.Product_category", column 'Product_category_id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0f44774e-0956-4ffc-8933-33d67f9aa34d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MenuRepository.<>c__DisplayClass7_0.<<AddMenuAsync>b__0>d.MoveNext() in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\MenuRepository\MenuRepository.cs:line 68
--- End of stack trace from previous location ---
   at BepKhoiBackend.DataAccess.Repository.Base.RepositoryBase.ExecuteDbActionAsync[T](Func`1 action) in C:\Users\abc\Desktop\New folder (2)\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.DataAccess\Repository\Base\RepositoryBase.cs:line 25
2025-04-15 17:54:48.965 +07:00 [WRN] Failed to add menu: Error occurred while adding menu: Database error while processing data.
2025-04-15 17:54:48.966 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-15 17:54:48.968 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 28.994ms
2025-04-15 17:54:48.969 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:54:48.970 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryuMlF3P8WjqMmzHct 1053 - 400 - application/json;+charset=utf-8 37.1661ms
2025-04-15 17:55:06.123 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryAPoUd8deNy0ITYVV 147444
2025-04-15 17:55:06.125 +07:00 [WRN] Error unprotecting the session cookie.
System.Security.Cryptography.CryptographicException: The payload was invalid. For more information go to http://aka.ms/dataprotectionwarning
   at Microsoft.AspNetCore.DataProtection.Cng.CbcAuthenticatedEncryptor.DecryptImpl(Byte* pbCiphertext, UInt32 cbCiphertext, Byte* pbAdditionalAuthenticatedData, UInt32 cbAdditionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.Cng.Internal.CngAuthenticatedEncryptorBase.Decrypt(ArraySegment`1 ciphertext, ArraySegment`1 additionalAuthenticatedData)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.UnprotectCore(Byte[] protectedData, Boolean allowOperationsOnRevokedKeys, UnprotectStatus& status)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingBasedDataProtector.Unprotect(Byte[] protectedData)
   at Microsoft.AspNetCore.Session.CookieProtection.Unprotect(IDataProtector protector, String protectedText, ILogger logger)
2025-04-15 17:55:06.126 +07:00 [INF] CORS policy execution failed.
2025-04-15 17:55:06.127 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-15 17:55:06.128 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:55:06.128 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-15 17:55:08.751 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-15 17:55:08.762 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-15 17:55:08.769 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-15 17:55:08.797 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-15 17:55:08.799 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-15 17:55:08.814 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-15 17:55:08.841 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 2710.9674ms
2025-04-15 17:55:08.843 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-15 17:55:08.845 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryAPoUd8deNy0ITYVV 147444 - 201 - application/json;+charset=utf-8 2721.2881ms
