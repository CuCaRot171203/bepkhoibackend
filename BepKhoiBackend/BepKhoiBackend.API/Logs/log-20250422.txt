2025-04-22 18:51:52.315 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 18:51:52.471 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 18:51:52.472 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 18:51:52.595 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 18:51:52.596 +07:00 [INF] Hosting environment: Development
2025-04-22 18:51:52.597 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 18:51:53.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 18:51:53.544 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 294.6721ms
2025-04-22 18:51:53.571 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 18:51:53.575 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.3844ms
2025-04-22 18:51:53.885 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 18:51:53.943 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.4465ms
2025-04-22 18:51:54.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 18:51:54.061 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 56.8296ms
2025-04-22 18:52:32.229 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarybfxAQ7m9ZVn4E130 1790383
2025-04-22 18:52:32.257 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:52:32.258 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:52:32.311 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-22 18:52:32.315 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 18:52:32.320 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarybfxAQ7m9ZVn4E130 1790383 - 401 0 - 90.8242ms
2025-04-22 18:52:32.325 +07:00 [INF] Connection id "0HNC1IG9F4O5V", Request id "0HNC1IG9F4O5V:00000009": the application completed without reading the entire request body.
2025-04-22 18:52:49.664 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryYtW82hYolnHjGN3I 1790383
2025-04-22 18:52:49.670 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:52:49.671 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:52:49.746 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:52:49.769 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 18:52:50.124 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-22 18:52:50.139 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 362.3989ms
2025-04-22 18:52:50.142 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:52:50.151 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryYtW82hYolnHjGN3I 1790383 - 400 - application/problem+json;+charset=utf-8 486.3614ms
2025-04-22 18:53:13.123 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarypVuxMKCC7jjutReA 1790381
2025-04-22 18:53:13.124 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:53:13.124 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:53:13.128 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:53:13.129 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 18:53:25.653 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 18:53:26.131 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-22 18:53:26.345 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-22 18:53:26.368 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p10, @p11);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 18:53:26.392 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 18:53:26.418 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 13287.5637ms
2025-04-22 18:53:26.420 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:53:26.424 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarypVuxMKCC7jjutReA 1790381 - 201 - application/json;+charset=utf-8 13300.7715ms
2025-04-22 18:54:47.433 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 18:54:47.437 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 3.4314ms
2025-04-22 18:54:47.465 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 18:54:47.467 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 18:54:47.468 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 0.6112ms
2025-04-22 18:54:47.472 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 6.5544ms
2025-04-22 18:54:47.857 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 18:54:47.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 36.2112ms
2025-04-22 18:55:41.720 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - -
2025-04-22 18:55:41.722 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 18:55:41.724 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 18:55:41.747 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 18:55:41.855 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-22 18:55:41.910 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-22 18:55:41.911 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 185.7269ms
2025-04-22 18:55:41.912 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 18:55:41.913 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - - - 200 - text/plain;+charset=utf-8 192.8858ms
2025-04-22 18:56:43.714 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920786&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422185655&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920786&vnp_TransactionStatus=00&vnp_TxnRef=638809449419044118&vnp_SecureHash=f12ba618ac545ab0f5f0b6d8e86c533b9d7695d121ccf6c4904997c50f204c58263c5d6583b0736cbee37018e2f9bffa2b4f642c7b0ca37b143600fb8e6e9d40 - -
2025-04-22 18:56:43.724 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager|cashier)
2025-04-22 18:56:43.725 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 18:56:43.726 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920786&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422185655&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920786&vnp_TransactionStatus=00&vnp_TxnRef=638809449419044118&vnp_SecureHash=f12ba618ac545ab0f5f0b6d8e86c533b9d7695d121ccf6c4904997c50f204c58263c5d6583b0736cbee37018e2f9bffa2b4f642c7b0ca37b143600fb8e6e9d40 - - - 401 0 - 12.3540ms
2025-04-22 19:01:34.351 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 19:01:34.493 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 19:01:34.494 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 19:01:34.597 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 19:01:34.597 +07:00 [INF] Hosting environment: Development
2025-04-22 19:01:34.598 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 19:01:35.148 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:01:35.296 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 150.8323ms
2025-04-22 19:01:35.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:01:35.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:01:35.320 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.6732ms
2025-04-22 19:01:35.345 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 30.3265ms
2025-04-22 19:01:35.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:01:35.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 51.4445ms
2025-04-22 19:01:55.343 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - -
2025-04-22 19:01:55.458 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 19:01:55.472 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 19:01:56.321 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:01:56.844 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-22 19:01:56.958 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-22 19:01:56.963 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1486.5133ms
2025-04-22 19:01:56.964 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 19:01:56.968 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - - - 200 - text/plain;+charset=utf-8 1625.4968ms
2025-04-22 19:02:31.128 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920800&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422190242&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920800&vnp_TransactionStatus=00&vnp_TxnRef=638809453169503684&vnp_SecureHash=2add7099b7565fcc0ab783bbc9ce8c9a0df04b4d019eb9730a7b13216a11abc2701a3ceacb012132c3dbe3debbe9ae36fdfb157caab8a4ca7aa668f9b2432a0c - -
2025-04-22 19:02:31.137 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-22 19:02:31.142 +07:00 [INF] Route matched with {action = "PaymentCallbackVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PaymentCallbackVnpay() on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 19:02:31.165 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:02:31.177 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__invoiceId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
FROM [Invoice] AS [i]
WHERE [i].[Invoice_id] = @__invoiceId_0
2025-04-22 19:02:31.246 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Invoice] SET [Status] = @p0
WHERE [Invoice_id] = @p1;
SELECT @@ROWCOUNT;
2025-04-22 19:02:31.261 +07:00 [INF] Executing RedirectResult, redirecting to https://facebook.com/.
2025-04-22 19:02:31.262 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API) in 116.2807ms
2025-04-22 19:02:31.263 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-22 19:02:31.264 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920800&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422190242&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920800&vnp_TransactionStatus=00&vnp_TxnRef=638809453169503684&vnp_SecureHash=2add7099b7565fcc0ab783bbc9ce8c9a0df04b4d019eb9730a7b13216a11abc2701a3ceacb012132c3dbe3debbe9ae36fdfb157caab8a4ca7aa668f9b2432a0c - - - 302 0 - 135.8711ms
