2025-04-22 18:51:52.315 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 18:51:52.471 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 18:51:52.472 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 18:51:52.595 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 18:51:52.596 +07:00 [INF] Hosting environment: Development
2025-04-22 18:51:52.597 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 18:51:53.254 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 18:51:53.544 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 294.6721ms
2025-04-22 18:51:53.571 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 18:51:53.575 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.3844ms
2025-04-22 18:51:53.885 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 18:51:53.943 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.4465ms
2025-04-22 18:51:54.004 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 18:51:54.061 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 56.8296ms
2025-04-22 18:52:32.229 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarybfxAQ7m9ZVn4E130 1790383
2025-04-22 18:52:32.257 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:52:32.258 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:52:32.311 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-22 18:52:32.315 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 18:52:32.320 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarybfxAQ7m9ZVn4E130 1790383 - 401 0 - 90.8242ms
2025-04-22 18:52:32.325 +07:00 [INF] Connection id "0HNC1IG9F4O5V", Request id "0HNC1IG9F4O5V:00000009": the application completed without reading the entire request body.
2025-04-22 18:52:49.664 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryYtW82hYolnHjGN3I 1790383
2025-04-22 18:52:49.670 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:52:49.671 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:52:49.746 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:52:49.769 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 18:52:50.124 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-04-22 18:52:50.139 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 362.3989ms
2025-04-22 18:52:50.142 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:52:50.151 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundaryYtW82hYolnHjGN3I 1790383 - 400 - application/problem+json;+charset=utf-8 486.3614ms
2025-04-22 18:53:13.123 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarypVuxMKCC7jjutReA 1790381
2025-04-22 18:53:13.124 +07:00 [INF] CORS policy execution failed.
2025-04-22 18:53:13.124 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 18:53:13.128 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:53:13.129 +07:00 [INF] Route matched with {action = "AddMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMenu(BepKhoiBackend.BusinessObject.dtos.MenuDto.CreateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 18:53:25.653 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 18:53:26.131 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__name_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN NOT EXISTS (
        SELECT 1
        FROM [Menu] AS [m]
        WHERE [m].[Product_name] <> @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-22 18:53:26.345 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Menu] ([Cost_price], [Description], [IsAvailable], [Product_category_id], [Product_name], [Product_vat], [Sale_price], [Sell_price], [Status], [Unit_id])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Product_id], [IsDelete]
FROM [Menu]
WHERE @@ROWCOUNT = 1 AND [Product_id] = scope_identity();
2025-04-22 18:53:26.368 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p10, @p11);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 18:53:26.392 +07:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 18:53:26.418 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API) in 13287.5637ms
2025-04-22 18:53:26.420 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.AddMenu (BepKhoiBackend.API)'
2025-04-22 18:53:26.424 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/Menu/add multipart/form-data;+boundary=----WebKitFormBoundarypVuxMKCC7jjutReA 1790381 - 201 - application/json;+charset=utf-8 13300.7715ms
2025-04-22 18:54:47.433 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 18:54:47.437 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 3.4314ms
2025-04-22 18:54:47.465 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 18:54:47.467 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 18:54:47.468 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 0.6112ms
2025-04-22 18:54:47.472 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 6.5544ms
2025-04-22 18:54:47.857 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 18:54:47.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 36.2112ms
2025-04-22 18:55:41.720 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - -
2025-04-22 18:55:41.722 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 18:55:41.724 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 18:55:41.747 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 18:55:41.855 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-22 18:55:41.910 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-22 18:55:41.911 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 185.7269ms
2025-04-22 18:55:41.912 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 18:55:41.913 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - - - 200 - text/plain;+charset=utf-8 192.8858ms
2025-04-22 18:56:43.714 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920786&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422185655&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920786&vnp_TransactionStatus=00&vnp_TxnRef=638809449419044118&vnp_SecureHash=f12ba618ac545ab0f5f0b6d8e86c533b9d7695d121ccf6c4904997c50f204c58263c5d6583b0736cbee37018e2f9bffa2b4f642c7b0ca37b143600fb8e6e9d40 - -
2025-04-22 18:56:43.724 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager|cashier)
2025-04-22 18:56:43.725 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 18:56:43.726 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920786&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422185655&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920786&vnp_TransactionStatus=00&vnp_TxnRef=638809449419044118&vnp_SecureHash=f12ba618ac545ab0f5f0b6d8e86c533b9d7695d121ccf6c4904997c50f204c58263c5d6583b0736cbee37018e2f9bffa2b4f642c7b0ca37b143600fb8e6e9d40 - - - 401 0 - 12.3540ms
2025-04-22 19:01:34.351 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 19:01:34.493 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 19:01:34.494 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 19:01:34.597 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 19:01:34.597 +07:00 [INF] Hosting environment: Development
2025-04-22 19:01:34.598 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 19:01:35.148 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:01:35.296 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 150.8323ms
2025-04-22 19:01:35.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:01:35.315 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:01:35.320 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.6732ms
2025-04-22 19:01:35.345 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 30.3265ms
2025-04-22 19:01:35.799 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:01:35.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 51.4445ms
2025-04-22 19:01:55.343 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - -
2025-04-22 19:01:55.458 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 19:01:55.472 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 19:01:56.321 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:01:56.844 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-22 19:01:56.958 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-22 19:01:56.963 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1486.5133ms
2025-04-22 19:01:56.964 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-22 19:01:56.968 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=6 - - - 200 - text/plain;+charset=utf-8 1625.4968ms
2025-04-22 19:02:31.128 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920800&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422190242&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920800&vnp_TransactionStatus=00&vnp_TxnRef=638809453169503684&vnp_SecureHash=2add7099b7565fcc0ab783bbc9ce8c9a0df04b4d019eb9730a7b13216a11abc2701a3ceacb012132c3dbe3debbe9ae36fdfb157caab8a4ca7aa668f9b2432a0c - -
2025-04-22 19:02:31.137 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-22 19:02:31.142 +07:00 [INF] Route matched with {action = "PaymentCallbackVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PaymentCallbackVnpay() on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-22 19:02:31.165 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:02:31.177 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__invoiceId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
FROM [Invoice] AS [i]
WHERE [i].[Invoice_id] = @__invoiceId_0
2025-04-22 19:02:31.246 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Invoice] SET [Status] = @p0
WHERE [Invoice_id] = @p1;
SELECT @@ROWCOUNT;
2025-04-22 19:02:31.261 +07:00 [INF] Executing RedirectResult, redirecting to https://facebook.com/.
2025-04-22 19:02:31.262 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API) in 116.2807ms
2025-04-22 19:02:31.263 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.PaymentCallbackVnpay (BepKhoiBackend.API)'
2025-04-22 19:02:31.264 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/Return?vnp_Amount=28350000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14920800&vnp_CardType=ATM&vnp_OrderInfo=6&vnp_PayDate=20250422190242&vnp_ResponseCode=00&vnp_TmnCode=1MTJPPPJ&vnp_TransactionNo=14920800&vnp_TransactionStatus=00&vnp_TxnRef=638809453169503684&vnp_SecureHash=2add7099b7565fcc0ab783bbc9ce8c9a0df04b4d019eb9730a7b13216a11abc2701a3ceacb012132c3dbe3debbe9ae36fdfb157caab8a4ca7aa668f9b2432a0c - - - 302 0 - 135.8711ms
2025-04-22 19:11:10.759 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 19:11:10.901 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 19:11:10.902 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 19:11:11.025 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 19:11:11.026 +07:00 [INF] Hosting environment: Development
2025-04-22 19:11:11.027 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 19:11:11.622 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:11:11.800 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 181.4621ms
2025-04-22 19:11:11.822 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:11:11.826 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.1281ms
2025-04-22 19:11:12.076 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:11:12.134 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.6484ms
2025-04-22 19:11:12.265 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:11:12.319 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 54.2017ms
2025-04-22 19:11:57.859 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 19:11:58.055 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 19:11:58.058 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 19:11:58.284 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 19:11:58.285 +07:00 [INF] Hosting environment: Development
2025-04-22 19:11:58.286 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 19:11:59.430 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:12:00.334 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 911.2390ms
2025-04-22 19:12:00.365 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:12:00.381 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 16.6849ms
2025-04-22 19:12:00.782 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:12:00.884 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 101.9433ms
2025-04-22 19:12:00.959 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:12:01.100 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.3675ms
2025-04-22 19:12:32.754 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/api/rooms/generate-qr/1?UrlBase=https%3A%2F%2Flocalhost%3A7257%2F - 0
2025-04-22 19:12:32.787 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:12:32.788 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:12:32.816 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.RoomController.GenerateQRCodeForRoom (BepKhoiBackend.API)'
2025-04-22 19:12:32.834 +07:00 [INF] Route matched with {action = "GenerateQRCodeForRoom", controller = "Room"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GenerateQRCodeForRoom(Int32, System.String) on controller BepKhoiBackend.API.Controllers.RoomController (BepKhoiBackend.API).
2025-04-22 19:12:33.637 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:12:34.150 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Room_id], [r].[isDelete], [r].[isUse], [r].[Ordinal_number], [r].[Qr_code_url], [r].[Room_area_id], [r].[Room_name], [r].[Room_note], [r].[Seat_number], [r].[Status]
FROM [Room] AS [r]
WHERE ([r].[Room_id] = @__id_0) AND ([r].[isDelete] = CAST(0 AS bit))
2025-04-22 19:12:45.877 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Room_id], [r].[isDelete], [r].[isUse], [r].[Ordinal_number], [r].[Qr_code_url], [r].[Room_area_id], [r].[Room_name], [r].[Room_note], [r].[Seat_number], [r].[Status]
FROM [Room] AS [r]
WHERE ([r].[Room_id] = @__id_0) AND ([r].[isDelete] = CAST(0 AS bit))
2025-04-22 19:12:45.961 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (Size = 255), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Size = 255), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Room] SET [isDelete] = @p0, [isUse] = @p1, [Ordinal_number] = @p2, [Qr_code_url] = @p3, [Room_area_id] = @p4, [Room_name] = @p5, [Room_note] = @p6, [Seat_number] = @p7, [Status] = @p8
WHERE [Room_id] = @p9;
SELECT @@ROWCOUNT;
2025-04-22 19:12:45.983 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType16`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-22 19:12:45.992 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.RoomController.GenerateQRCodeForRoom (BepKhoiBackend.API) in 13150.2486ms
2025-04-22 19:12:45.993 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.RoomController.GenerateQRCodeForRoom (BepKhoiBackend.API)'
2025-04-22 19:12:45.998 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/api/rooms/generate-qr/1?UrlBase=https%3A%2F%2Flocalhost%3A7257%2F - 0 - 200 - application/json;+charset=utf-8 13244.6862ms
2025-04-22 19:54:33.764 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 19:54:33.874 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 19:54:33.875 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 19:54:33.996 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 19:54:33.997 +07:00 [INF] Hosting environment: Development
2025-04-22 19:54:33.998 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 19:54:34.313 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:54:34.429 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 118.7289ms
2025-04-22 19:54:34.461 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:54:34.461 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:54:34.464 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.7455ms
2025-04-22 19:54:34.486 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 24.7876ms
2025-04-22 19:54:34.892 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:54:34.931 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 39.3192ms
2025-04-22 19:55:21.755 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 19:55:21.759 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 4.0366ms
2025-04-22 19:55:21.788 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 19:55:21.792 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 19:55:21.794 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 2.3108ms
2025-04-22 19:55:21.799 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 11.1699ms
2025-04-22 19:55:22.293 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 19:55:22.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 33.7908ms
2025-04-22 19:55:55.021 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundarymVMxN4jkflbJYANf 1790486
2025-04-22 19:55:55.049 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:55:55.050 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:55:55.078 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-22 19:55:55.082 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 19:55:55.084 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundarymVMxN4jkflbJYANf 1790486 - 401 0 - 62.8558ms
2025-04-22 19:55:55.090 +07:00 [INF] Connection id "0HNC1JJADFF7V", Request id "0HNC1JJADFF7V:00000001": the application completed without reading the entire request body.
2025-04-22 19:56:12.526 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundary8BluwAEVYMD0R8iA 1790486
2025-04-22 19:56:12.533 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:56:12.533 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:56:12.607 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/22/2025 12:37:11 PM', Current time (UTC): '4/22/2025 12:56:12 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-04-22 19:56:12.644 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/22/2025 12:37:11 PM', Current time (UTC): '4/22/2025 12:56:12 PM'.
2025-04-22 19:56:12.645 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-22 19:56:12.648 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 19:56:12.650 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundary8BluwAEVYMD0R8iA 1790486 - 401 0 - 123.2208ms
2025-04-22 19:56:12.651 +07:00 [INF] Connection id "0HNC1JJADFF80", Request id "0HNC1JJADFF80:00000001": the application completed without reading the entire request body.
2025-04-22 19:56:16.206 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryrDaac8YC7XIzAXVD 1790486
2025-04-22 19:56:16.208 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:56:16.208 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:56:16.210 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/22/2025 12:37:11 PM', Current time (UTC): '4/22/2025 12:56:16 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2025-04-22 19:56:16.212 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '4/22/2025 12:37:11 PM', Current time (UTC): '4/22/2025 12:56:16 PM'.
2025-04-22 19:56:16.212 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-04-22 19:56:16.214 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-22 19:56:16.215 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryrDaac8YC7XIzAXVD 1790486 - 401 0 - 8.3042ms
2025-04-22 19:56:16.215 +07:00 [INF] Connection id "0HNC1JJADFF81", Request id "0HNC1JJADFF81:00000001": the application completed without reading the entire request body.
2025-04-22 19:57:05.644 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/login application/json 56
2025-04-22 19:57:05.645 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:57:05.646 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:57:05.649 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-22 19:57:05.681 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-22 19:57:06.525 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:57:06.951 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name], [u1].[User_information_id], [u1].[Address], [u1].[Date_of_birth], [u1].[District], [u1].[Province_City], [u1].[User_name], [u1].[Ward_Commune]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
INNER JOIN [User_information] AS [u1] ON [u].[user_information_id] = [u1].[User_information_id]
WHERE [u].[email] = @__email_0
2025-04-22 19:57:07.072 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`5[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-22 19:57:07.082 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1394.2128ms
2025-04-22 19:57:07.083 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-22 19:57:07.085 +07:00 [INF] Session started; Key:6b1fca8b-5e16-92e0-5f45-81b55ed8bf0d, Id:9d1bb769-9dd7-c95c-95b5-c4752adb6e49
2025-04-22 19:57:07.089 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/login application/json 56 - 200 - application/json;+charset=utf-8 1444.4328ms
2025-04-22 19:57:21.832 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryDyqEQuwMr2japarX 1790486
2025-04-22 19:57:21.837 +07:00 [INF] CORS policy execution failed.
2025-04-22 19:57:21.837 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 19:57:21.853 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 19:57:21.864 +07:00 [INF] Route matched with {action = "UpdateMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMenu(Int32, BepKhoiBackend.BusinessObject.dtos.MenuDto.UpdateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 19:57:34.192 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 19:57:34.235 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 19:57:34.413 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 19:57:34.435 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 19:57:34.472 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 19:57:34.483 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API) in 12617.6871ms
2025-04-22 19:57:34.485 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 19:57:34.488 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryDyqEQuwMr2japarX 1790486 - 200 - application/json;+charset=utf-8 12656.2165ms
2025-04-22 20:17:21.405 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 20:17:21.714 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 20:17:21.717 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 20:17:21.911 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 20:17:21.912 +07:00 [INF] Hosting environment: Development
2025-04-22 20:17:21.913 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 20:17:22.071 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:17:22.273 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 205.2695ms
2025-04-22 20:17:22.319 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:17:22.319 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:17:22.323 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.4957ms
2025-04-22 20:17:22.357 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 38.2787ms
2025-04-22 20:17:22.701 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:17:22.756 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 55.1230ms
2025-04-22 20:17:56.315 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7257/login application/json 56
2025-04-22 20:17:56.360 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:17:56.361 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:17:56.387 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-22 20:17:56.404 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(BepKhoiBackend.BusinessObject.dtos.LoginDto.LoginRequestDto) on controller BepKhoiBackend.API.Controllers.LoginControllers.AuthController (BepKhoiBackend.API).
2025-04-22 20:17:57.323 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:17:57.792 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[User_id], [u].[create_date], [u].[email], [u].[isDelete], [u].[is_verify], [u].[password], [u].[phone], [u].[role_id], [u].[status], [u].[user_information_id], [u0].[role_id], [u0].[isDelete], [u0].[role_name], [u1].[User_information_id], [u1].[Address], [u1].[Date_of_birth], [u1].[District], [u1].[Province_City], [u1].[User_name], [u1].[Ward_Commune]
FROM [User] AS [u]
INNER JOIN [User_role] AS [u0] ON [u].[role_id] = [u0].[role_id]
INNER JOIN [User_information] AS [u1] ON [u].[user_information_id] = [u1].[User_information_id]
WHERE [u].[email] = @__email_0
2025-04-22 20:17:57.916 +07:00 [INF] Accessing expired session, Key:6b1fca8b-5e16-92e0-5f45-81b55ed8bf0d
2025-04-22 20:17:57.922 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`5[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-22 20:17:57.929 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API) in 1519.0249ms
2025-04-22 20:17:57.930 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.LoginControllers.AuthController.Login (BepKhoiBackend.API)'
2025-04-22 20:17:57.933 +07:00 [INF] Session started; Key:6b1fca8b-5e16-92e0-5f45-81b55ed8bf0d, Id:8b4d721f-5f89-a01e-e228-68572b5ea95d
2025-04-22 20:17:57.939 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7257/login application/json 56 - 200 - application/json;+charset=utf-8 1624.4563ms
2025-04-22 20:19:13.810 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryBBCEzExrlbwRdkwZ 1790484
2025-04-22 20:19:13.814 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:19:13.815 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:19:13.902 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:19:13.918 +07:00 [INF] Route matched with {action = "UpdateMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMenu(Int32, BepKhoiBackend.BusinessObject.dtos.MenuDto.UpdateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 20:19:25.520 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:19:25.560 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 20:19:25.719 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 20:19:25.742 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 20:19:25.802 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 20:19:25.823 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API) in 11902.6307ms
2025-04-22 20:19:25.825 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:19:25.831 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryBBCEzExrlbwRdkwZ 1790484 - 200 - application/json;+charset=utf-8 12021.0849ms
2025-04-22 20:24:55.452 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 20:24:55.581 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 20:24:55.582 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 20:24:55.711 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 20:24:55.711 +07:00 [INF] Hosting environment: Development
2025-04-22 20:24:55.712 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 20:24:55.867 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:24:56.007 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 142.0739ms
2025-04-22 20:24:56.037 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:24:56.037 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:24:56.043 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 5.7180ms
2025-04-22 20:24:56.064 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.6629ms
2025-04-22 20:24:56.342 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:24:56.399 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 57.3894ms
2025-04-22 20:25:35.825 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryNTBplMDcYwB0FIml 893342
2025-04-22 20:25:35.860 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:25:35.861 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:25:35.946 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:25:35.965 +07:00 [INF] Route matched with {action = "UpdateMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMenu(Int32, BepKhoiBackend.BusinessObject.dtos.MenuDto.UpdateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 20:25:46.077 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:25:46.571 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 20:25:46.837 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 20:25:46.865 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 20:25:46.928 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 20:25:46.957 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API) in 10984.0701ms
2025-04-22 20:25:46.960 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:25:46.972 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryNTBplMDcYwB0FIml 893342 - 200 - application/json;+charset=utf-8 11146.2866ms
2025-04-22 20:27:42.171 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 20:27:42.278 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 20:27:42.278 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 20:27:42.398 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 20:27:42.399 +07:00 [INF] Hosting environment: Development
2025-04-22 20:27:42.400 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 20:27:42.860 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:27:42.974 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 116.0580ms
2025-04-22 20:27:42.994 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:27:42.994 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:27:42.999 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.1175ms
2025-04-22 20:27:43.022 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 28.1727ms
2025-04-22 20:27:43.444 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:27:43.485 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 40.5958ms
2025-04-22 20:27:58.322 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:27:58.326 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 4.1991ms
2025-04-22 20:27:58.350 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:27:58.355 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:27:58.356 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 1.2096ms
2025-04-22 20:27:58.358 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 7.6435ms
2025-04-22 20:27:58.635 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:27:58.677 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 41.4386ms
2025-04-22 20:28:36.152 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundarygdEQXEjkJ4U8OIXe 1790487
2025-04-22 20:28:36.177 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:28:36.178 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:28:36.249 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:28:36.269 +07:00 [INF] Route matched with {action = "UpdateMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMenu(Int32, BepKhoiBackend.BusinessObject.dtos.MenuDto.UpdateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 20:28:48.400 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:28:48.823 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 20:28:49.016 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 20:28:49.029 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p0, @p1);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 20:28:49.065 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 20:28:49.078 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API) in 12803.2342ms
2025-04-22 20:28:49.080 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:28:49.087 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundarygdEQXEjkJ4U8OIXe 1790487 - 200 - application/json;+charset=utf-8 12934.6217ms
2025-04-22 20:29:28.325 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 20:29:28.464 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 20:29:28.466 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 20:29:28.598 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 20:29:28.600 +07:00 [INF] Hosting environment: Development
2025-04-22 20:29:28.600 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 20:29:28.950 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:29:29.067 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 119.7385ms
2025-04-22 20:29:29.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:29:29.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:29:29.094 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 5.6204ms
2025-04-22 20:29:29.117 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 29.2906ms
2025-04-22 20:29:29.459 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:29:29.500 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 40.5669ms
2025-04-22 20:30:09.701 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryVPTrVQwk13yrjBHO 1790498
2025-04-22 20:30:09.731 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:30:09.732 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:30:09.813 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:30:09.830 +07:00 [INF] Route matched with {action = "UpdateMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMenu(Int32, BepKhoiBackend.BusinessObject.dtos.MenuDto.UpdateMenuDto) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 20:30:14.538 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:30:14.923 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 20:30:15.000 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Product_image] AS [p]
WHERE [p].[Product_id] = @__productId_0
2025-04-22 20:30:15.125 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [Sale_price] = @p2, [Sell_price] = @p3
WHERE [Product_id] = @p4;
SELECT @@ROWCOUNT;

DELETE FROM [Product_image]
WHERE [Product_image_id] = @p5;
SELECT @@ROWCOUNT;

DELETE FROM [Product_image]
WHERE [Product_image_id] = @p6;
SELECT @@ROWCOUNT;

DELETE FROM [Product_image]
WHERE [Product_image_id] = @p7;
SELECT @@ROWCOUNT;

DELETE FROM [Product_image]
WHERE [Product_image_id] = @p8;
SELECT @@ROWCOUNT;
2025-04-22 20:30:15.136 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Product_image]
WHERE [Product_image_id] = @p9;
SELECT @@ROWCOUNT;
2025-04-22 20:30:15.143 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p10='?' (DbType = Int32), @p11='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Product_image] ([Product_id], [Product_image])
VALUES (@p10, @p11);
SELECT [Product_image_id]
FROM [Product_image]
WHERE @@ROWCOUNT = 1 AND [Product_image_id] = scope_identity();
2025-04-22 20:30:15.176 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 20:30:15.190 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.MenuDto.MenuDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-22 20:30:15.203 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API) in 5368.3495ms
2025-04-22 20:30:15.204 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.UpdateMenu (BepKhoiBackend.API)'
2025-04-22 20:30:15.212 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7257/api/Menu/update-menu/2 multipart/form-data;+boundary=----WebKitFormBoundaryVPTrVQwk13yrjBHO 1790498 - 200 - application/json;+charset=utf-8 5511.1385ms
2025-04-22 20:34:34.414 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-22 20:34:34.565 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-22 20:34:34.566 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-22 20:34:34.681 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-22 20:34:34.682 +07:00 [INF] Hosting environment: Development
2025-04-22 20:34:34.683 +07:00 [INF] Content root path: C:\Users\abc\Desktop\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-22 20:34:35.088 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-22 20:34:35.207 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 123.1484ms
2025-04-22 20:34:35.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-22 20:34:35.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-22 20:34:35.231 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.8226ms
2025-04-22 20:34:35.255 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.8161ms
2025-04-22 20:34:35.640 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-22 20:34:35.678 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 38.0015ms
2025-04-22 20:34:59.895 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7257/api/Menu/2 - -
2025-04-22 20:34:59.927 +07:00 [INF] CORS policy execution failed.
2025-04-22 20:34:59.928 +07:00 [INF] Request origin https://localhost:7257 does not have permission to access the resource.
2025-04-22 20:35:00.003 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.DeleteMenu (BepKhoiBackend.API)'
2025-04-22 20:35:00.023 +07:00 [INF] Route matched with {action = "DeleteMenu", controller = "Menu"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteMenu(Int32) on controller BepKhoiBackend.API.Controllers.MenuControllers.MenuController (BepKhoiBackend.API).
2025-04-22 20:35:00.846 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-22 20:35:01.262 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__pId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Product_id], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name], [m].[Product_vat], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
FROM [Menu] AS [m]
WHERE ([m].[Product_id] = @__pId_0) AND ([m].[IsDelete] = CAST(0 AS bit))
2025-04-22 20:35:01.363 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__productId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Product_image_id], [p].[Product_id], [p].[Product_image]
FROM [Product_image] AS [p]
WHERE [p].[Product_id] = @__productId_0
2025-04-22 20:35:01.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Product_image]
WHERE [Product_image_id] = @p0;
SELECT @@ROWCOUNT;
2025-04-22 20:35:01.516 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p7='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Menu] SET [Cost_price] = @p0, [Description] = @p1, [IsAvailable] = @p2, [IsDelete] = @p3, [Product_category_id] = @p4, [Product_name] = @p5, [Product_vat] = @p6, [Sale_price] = @p7, [Sell_price] = @p8, [Status] = @p9, [Unit_id] = @p10
WHERE [Product_id] = @p11;
SELECT @@ROWCOUNT;
2025-04-22 20:35:01.526 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-04-22 20:35:01.533 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.MenuControllers.MenuController.DeleteMenu (BepKhoiBackend.API) in 1504.117ms
2025-04-22 20:35:01.534 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.MenuControllers.MenuController.DeleteMenu (BepKhoiBackend.API)'
2025-04-22 20:35:01.539 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7257/api/Menu/2 - - - 200 - application/json;+charset=utf-8 1643.6900ms
