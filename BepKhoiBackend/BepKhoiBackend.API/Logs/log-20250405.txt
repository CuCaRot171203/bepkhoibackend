2025-04-05 00:16:51.766 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 00:17:34.190 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 00:17:34.431 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 00:17:34.433 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 00:17:34.617 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 00:17:34.621 +07:00 [INF] Hosting environment: Development
2025-04-05 00:17:34.626 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 00:17:35.069 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 00:17:35.348 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 283.3943ms
2025-04-05 00:17:35.381 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 00:17:35.386 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.3176ms
2025-04-05 00:17:35.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 00:17:35.727 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 74.3015ms
2025-04-05 00:17:35.780 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 00:17:35.825 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 44.8763ms
2025-04-05 00:17:43.521 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/1/print-pdf - -
2025-04-05 00:17:44.645 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API)'
2025-04-05 00:17:44.674 +07:00 [INF] Route matched with {action = "GetInvoicePdf", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetInvoicePdf(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 00:17:46.174 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 00:17:47.552 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [t].[Customer_id0], [t0].[Invoice_detail_id], [t0].[Invoice_id], [t0].[Price], [t0].[Product_id], [t0].[Product_name], [t0].[Product_note], [t0].[Product_vat], [t0].[Quantity], [t0].[Product_id0], [t0].[Cost_price], [t0].[Description], [t0].[IsAvailable], [t0].[IsDelete], [t0].[Product_category_id], [t0].[Product_name0], [t0].[Product_vat0], [t0].[Sale_price], [t0].[Sell_price], [t0].[Status], [t0].[Unit_id], [t].[Customer_name], [t].[isDelete], [t].[Phone]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat], [c].[Customer_id] AS [Customer_id0], [c].[Customer_name], [c].[isDelete], [c].[Phone]
    FROM [Invoice] AS [i]
    LEFT JOIN [Customer] AS [c] ON [i].[Customer_id] = [c].[Customer_id]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity], [m].[Product_id] AS [Product_id0], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name] AS [Product_name0], [m].[Product_vat] AS [Product_vat0], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
    FROM [Invoice_detail] AS [i0]
    INNER JOIN [Menu] AS [m] ON [i0].[Product_id] = [m].[Product_id]
) AS [t0] ON [t].[Invoice_id] = [t0].[Invoice_id]
ORDER BY [t].[Invoice_id], [t].[Customer_id0], [t0].[Invoice_detail_id]
2025-04-05 00:17:48.163 +07:00 [INF] Executing FileContentResult, sending file with download name 'Invoice_1.pdf' ...
2025-04-05 00:17:48.176 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API) in 3487.0132ms
2025-04-05 00:17:48.180 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API)'
2025-04-05 00:17:48.184 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/1/print-pdf - - - 200 58060 application/pdf 4662.2293ms
2025-04-05 00:18:43.150 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 00:18:43.163 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:18:43.169 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 00:18:43.196 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 00:18:43.227 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 00:18:43.256 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 00:18:43.265 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 89.6635ms
2025-04-05 00:18:43.268 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:18:43.272 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 121.4154ms
2025-04-05 00:18:44.300 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 00:18:44.310 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:18:44.313 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 00:18:44.371 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 00:18:44.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 00:18:44.395 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 00:18:44.397 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 72.8762ms
2025-04-05 00:18:44.398 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:18:44.400 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 99.6424ms
2025-04-05 00:19:41.155 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 00:19:41.328 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 00:19:41.330 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 00:19:41.455 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 00:19:41.460 +07:00 [INF] Hosting environment: Development
2025-04-05 00:19:41.466 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 00:19:42.350 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 00:19:42.611 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 264.0141ms
2025-04-05 00:19:42.650 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 00:19:42.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 00:19:42.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 7.4458ms
2025-04-05 00:19:42.692 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 42.4558ms
2025-04-05 00:19:43.050 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 00:19:43.102 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 51.9925ms
2025-04-05 00:21:12.434 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 00:21:12.446 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 12.2671ms
2025-04-05 00:21:12.482 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 00:21:12.486 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.3041ms
2025-04-05 00:21:12.745 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 00:21:12.758 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.6662ms
2025-04-05 00:21:12.849 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 00:21:12.888 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 38.5914ms
2025-04-05 00:21:25.687 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 00:21:25.757 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:21:25.782 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 00:21:26.678 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 00:21:27.335 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 00:21:27.477 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 00:21:27.492 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1692.3197ms
2025-04-05 00:21:27.500 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:21:27.507 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 1820.2887ms
2025-04-05 00:21:34.582 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 00:21:34.593 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:21:34.598 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 00:21:34.615 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 00:21:34.629 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 00:21:34.648 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 00:21:34.656 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 51.9379ms
2025-04-05 00:21:34.659 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 00:21:34.664 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 81.3324ms
2025-04-05 00:21:35.100 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/favicon.ico - -
2025-04-05 00:21:35.107 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/favicon.ico - - - 404 0 - 7.2640ms
2025-04-05 09:46:29.055 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 09:46:29.247 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 09:46:29.252 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 09:46:29.389 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 09:46:29.390 +07:00 [INF] Hosting environment: Development
2025-04-05 09:46:29.391 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 09:46:29.930 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 09:46:30.154 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 226.2458ms
2025-04-05 09:46:30.187 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 09:46:30.194 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.7842ms
2025-04-05 09:46:30.418 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 09:46:30.468 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.8247ms
2025-04-05 09:46:30.515 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 09:46:30.555 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 39.4336ms
2025-04-05 09:46:39.267 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 09:46:40.020 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 09:46:40.048 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 09:46:41.080 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 09:46:42.136 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 09:46:42.264 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 09:46:42.278 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 2215.5472ms
2025-04-05 09:46:42.285 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 09:46:42.294 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 3026.6607ms
2025-04-05 09:46:49.375 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 09:46:49.383 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 09:46:49.386 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 09:46:49.398 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 09:46:49.415 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 09:46:49.422 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 09:46:49.424 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 36.0104ms
2025-04-05 09:46:49.425 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 09:46:49.426 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 51.5220ms
2025-04-05 09:46:49.737 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/favicon.ico - -
2025-04-05 09:46:49.743 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/favicon.ico - - - 404 0 - 6.1394ms
2025-04-05 12:57:15.387 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 12:57:15.569 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 12:57:15.574 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 12:57:15.677 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 12:57:15.679 +07:00 [INF] Hosting environment: Development
2025-04-05 12:57:15.681 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 12:57:16.153 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 12:57:16.336 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 188.3636ms
2025-04-05 12:57:16.360 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 12:57:16.367 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 7.0503ms
2025-04-05 12:57:16.585 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 12:57:16.663 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.8931ms
2025-04-05 12:57:16.702 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 12:57:16.743 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 41.5938ms
2025-04-05 12:57:29.183 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 12:57:29.919 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 12:57:29.946 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 12:57:30.953 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 12:57:31.981 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 12:57:32.090 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 12:57:32.100 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 2138ms
2025-04-05 12:57:32.106 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 12:57:32.111 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 2928.0112ms
2025-04-05 12:58:52.632 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 12:58:52.772 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 12:58:52.776 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 12:58:52.878 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 12:58:52.880 +07:00 [INF] Hosting environment: Development
2025-04-05 12:58:52.882 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 12:58:53.231 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 12:58:53.359 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 129.7961ms
2025-04-05 12:58:53.392 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 12:58:53.392 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 12:58:53.400 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 7.7199ms
2025-04-05 12:58:53.427 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.6730ms
2025-04-05 12:58:53.694 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 12:58:53.733 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 39.2358ms
2025-04-05 12:59:07.217 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 12:59:07.226 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 8.6501ms
2025-04-05 12:59:07.260 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 12:59:07.265 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 12:59:07.269 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 4.8681ms
2025-04-05 12:59:07.273 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.9014ms
2025-04-05 12:59:07.482 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 12:59:07.511 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 29.1496ms
2025-04-05 12:59:12.017 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 12:59:12.067 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 12:59:12.086 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 12:59:12.716 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 12:59:13.253 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 12:59:13.362 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 12:59:13.371 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1273.9012ms
2025-04-05 12:59:13.385 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 12:59:13.396 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 1378.5968ms
2025-04-05 13:01:36.870 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 13:01:37.028 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 13:01:37.033 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 13:01:37.144 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 13:01:37.147 +07:00 [INF] Hosting environment: Development
2025-04-05 13:01:37.152 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 13:01:39.995 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 13:01:40.177 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 185.0713ms
2025-04-05 13:01:40.205 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 13:01:40.205 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 13:01:40.214 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 9.4185ms
2025-04-05 13:01:40.245 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 39.8978ms
2025-04-05 13:01:40.550 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 13:01:40.612 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 61.8617ms
2025-04-05 13:01:46.212 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:01:46.266 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:01:46.291 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:01:47.127 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:01:47.763 +07:00 [INF] Executed DbCommand (46ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:01:47.907 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 13:01:47.920 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1617.5566ms
2025-04-05 13:01:47.926 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:01:47.931 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 1718.9436ms
2025-04-05 13:03:36.175 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 13:03:36.292 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 13:03:36.298 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 13:03:36.386 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 13:03:36.390 +07:00 [INF] Hosting environment: Development
2025-04-05 13:03:36.394 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 13:03:39.184 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 13:03:39.369 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 188.6190ms
2025-04-05 13:03:39.393 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 13:03:39.400 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 6.4806ms
2025-04-05 13:03:39.597 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 13:03:39.631 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.0673ms
2025-04-05 13:03:39.752 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 13:03:39.794 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 41.6708ms
2025-04-05 13:03:45.970 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:03:46.026 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:03:46.051 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:03:46.716 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:03:47.285 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:03:47.403 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 13:03:47.414 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1349.2268ms
2025-04-05 13:03:47.421 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:03:47.428 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 1457.4920ms
2025-04-05 13:12:53.496 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 13:12:53.729 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 13:12:53.734 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 13:12:53.822 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 13:12:53.826 +07:00 [INF] Hosting environment: Development
2025-04-05 13:12:53.831 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 13:12:54.414 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 13:12:54.576 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 166.0569ms
2025-04-05 13:12:54.598 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 13:12:54.601 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 3.1302ms
2025-04-05 13:12:54.790 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 13:12:54.825 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.9893ms
2025-04-05 13:12:54.879 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 13:12:54.921 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 42.4534ms
2025-04-05 13:13:21.013 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:13:21.681 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:13:21.701 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:13:22.659 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:13:23.702 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:13:23.819 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 13:13:23.832 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 2115.2406ms
2025-04-05 13:13:23.840 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:13:23.844 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 2830.5780ms
2025-04-05 13:14:25.676 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 13:14:25.681 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 5.0591ms
2025-04-05 13:14:25.706 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 13:14:25.707 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 1.8252ms
2025-04-05 13:14:25.948 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 13:14:25.964 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 15.6061ms
2025-04-05 13:14:26.040 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 13:14:26.074 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 33.3606ms
2025-04-05 13:14:34.028 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:14:34.034 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:14:34.037 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:14:34.051 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:14:34.079 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:14:34.090 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-05 13:14:34.091 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 53.5728ms
2025-04-05 13:14:34.093 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:14:34.094 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 500 - text/plain;+charset=utf-8 66.1257ms
2025-04-05 13:19:52.275 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 13:19:52.419 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 13:19:52.424 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 13:19:52.529 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 13:19:52.533 +07:00 [INF] Hosting environment: Development
2025-04-05 13:19:52.535 +07:00 [INF] Content root path: D:\merge-doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 13:19:53.154 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 13:19:53.327 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 175.4729ms
2025-04-05 13:19:53.348 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 13:19:53.355 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 7.1059ms
2025-04-05 13:19:53.568 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 13:19:53.625 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.0646ms
2025-04-05 13:19:53.670 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 13:19:53.706 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 36.5099ms
2025-04-05 13:19:59.178 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:19:59.225 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:19:59.243 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:19:59.994 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:20:00.506 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:20:00.639 +07:00 [INF] Executing RedirectResult, redirecting to https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=220000&vnp_Command=pay&vnp_CreateDate=20250405132000&vnp_CurrCode=VND&vnp_IpAddr=192.168.1.9&vnp_Locale=vn&vnp_OrderInfo=1&vnp_OrderType=other&vnp_ReturnUrl=https%3A%2F%2Flocalhost%3A7257%2Fapi%2FInvoice%2FReturn&vnp_TmnCode=1MTJPPPJ&vnp_TxnRef=638794560006274099&vnp_Version=2.1.0&vnp_SecureHash=61fec819cf7b539a8ed8b5fca44de486a477e73df0c70a0babbc325fa2807c5e82bfa22e7a45849e48a2493e5586e3730cd626920e540f1d471af4c15f680a2d.
2025-04-05 13:20:00.650 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 1394.4835ms
2025-04-05 13:20:00.658 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:20:00.665 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 302 0 - 1486.9596ms
2025-04-05 13:20:07.989 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - -
2025-04-05 13:20:07.999 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:20:08.002 +07:00 [INF] Route matched with {action = "CreatePaymentUrlVnpay", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePaymentUrlVnpay(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 13:20:08.021 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 13:20:08.038 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat]
    FROM [Invoice] AS [i]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN [Invoice_detail] AS [i0] ON [t].[Invoice_id] = [i0].[Invoice_id]
ORDER BY [t].[Invoice_id]
2025-04-05 13:20:08.053 +07:00 [INF] Executing RedirectResult, redirecting to https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=220000&vnp_Command=pay&vnp_CreateDate=20250405132008&vnp_CurrCode=VND&vnp_IpAddr=192.168.1.9&vnp_Locale=vn&vnp_OrderInfo=1&vnp_OrderType=other&vnp_ReturnUrl=https%3A%2F%2Flocalhost%3A7257%2Fapi%2FInvoice%2FReturn&vnp_TmnCode=1MTJPPPJ&vnp_TxnRef=638794560080468446&vnp_Version=2.1.0&vnp_SecureHash=bc79cc7786da6e159621916ca1af8e63af9772ca690f040edba58b242f6977a4b53ff3d91c45927c182b63dd25499284afaba66711cc488aeeb24a2ec490a1f5.
2025-04-05 13:20:08.056 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API) in 47.0665ms
2025-04-05 13:20:08.062 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.CreatePaymentUrlVnpay (BepKhoiBackend.API)'
2025-04-05 13:20:08.065 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/vnpay-url?Id=1 - - - 302 0 - 76.3432ms
2025-04-05 19:07:42.413 +07:00 [INF] User profile is available. Using 'C:\Users\abc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-05 19:07:42.805 +07:00 [INF] Now listening on: https://localhost:7257
2025-04-05 19:07:42.807 +07:00 [INF] Now listening on: http://localhost:5287
2025-04-05 19:07:42.970 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-05 19:07:42.971 +07:00 [INF] Hosting environment: Development
2025-04-05 19:07:42.971 +07:00 [INF] Content root path: D:\Doan\bepkhoibackend\BepKhoiBackend\BepKhoiBackend.API\
2025-04-05 19:07:43.712 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/index.html - -
2025-04-05 19:07:44.015 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/index.html - - - 200 - text/html;charset=utf-8 307.6522ms
2025-04-05 19:07:44.031 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - -
2025-04-05 19:07:44.043 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_framework/aspnetcore-browser-refresh.js - - - 200 16521 application/javascript;+charset=utf-8 11.5128ms
2025-04-05 19:07:44.301 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/_vs/browserLink - -
2025-04-05 19:07:44.369 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.9991ms
2025-04-05 19:07:44.411 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - -
2025-04-05 19:07:44.454 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 43.3977ms
2025-04-05 19:07:53.557 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/Invoice/1/print-pdf - -
2025-04-05 19:07:54.388 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API)'
2025-04-05 19:07:54.413 +07:00 [INF] Route matched with {action = "GetInvoicePdf", controller = "Invoice"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetInvoicePdf(Int32) on controller BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController (BepKhoiBackend.API).
2025-04-05 19:07:55.926 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 19:07:57.436 +07:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Invoice_id], [t].[Amount_due], [t].[Cashier_id], [t].[Check_in_time], [t].[Check_out_time], [t].[Customer_id], [t].[Invoice_discount], [t].[Invoice_note], [t].[Order_id], [t].[Order_type_id], [t].[Other_payment], [t].[Payment_method_id], [t].[Room_id], [t].[Shipper_id], [t].[Status], [t].[Subtotal], [t].[Total_quantity], [t].[Total_vat], [t].[Customer_id0], [t0].[Invoice_detail_id], [t0].[Invoice_id], [t0].[Price], [t0].[Product_id], [t0].[Product_name], [t0].[Product_note], [t0].[Product_vat], [t0].[Quantity], [t0].[Product_id0], [t0].[Cost_price], [t0].[Description], [t0].[IsAvailable], [t0].[IsDelete], [t0].[Product_category_id], [t0].[Product_name0], [t0].[Product_vat0], [t0].[Sale_price], [t0].[Sell_price], [t0].[Status], [t0].[Unit_id], [t].[Customer_name], [t].[isDelete], [t].[Phone]
FROM (
    SELECT TOP(1) [i].[Invoice_id], [i].[Amount_due], [i].[Cashier_id], [i].[Check_in_time], [i].[Check_out_time], [i].[Customer_id], [i].[Invoice_discount], [i].[Invoice_note], [i].[Order_id], [i].[Order_type_id], [i].[Other_payment], [i].[Payment_method_id], [i].[Room_id], [i].[Shipper_id], [i].[Status], [i].[Subtotal], [i].[Total_quantity], [i].[Total_vat], [c].[Customer_id] AS [Customer_id0], [c].[Customer_name], [c].[isDelete], [c].[Phone]
    FROM [Invoice] AS [i]
    LEFT JOIN [Customer] AS [c] ON [i].[Customer_id] = [c].[Customer_id]
    WHERE [i].[Invoice_id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [i0].[Invoice_detail_id], [i0].[Invoice_id], [i0].[Price], [i0].[Product_id], [i0].[Product_name], [i0].[Product_note], [i0].[Product_vat], [i0].[Quantity], [m].[Product_id] AS [Product_id0], [m].[Cost_price], [m].[Description], [m].[IsAvailable], [m].[IsDelete], [m].[Product_category_id], [m].[Product_name] AS [Product_name0], [m].[Product_vat] AS [Product_vat0], [m].[Sale_price], [m].[Sell_price], [m].[Status], [m].[Unit_id]
    FROM [Invoice_detail] AS [i0]
    INNER JOIN [Menu] AS [m] ON [i0].[Product_id] = [m].[Product_id]
) AS [t0] ON [t].[Invoice_id] = [t0].[Invoice_id]
ORDER BY [t].[Invoice_id], [t].[Customer_id0], [t0].[Invoice_detail_id]
2025-04-05 19:07:58.076 +07:00 [INF] Executing FileContentResult, sending file with download name 'Invoice_1.pdf' ...
2025-04-05 19:07:58.092 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API) in 3671.9238ms
2025-04-05 19:07:58.095 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.InvoiceControllers.InvoiceController.GetInvoicePdf (BepKhoiBackend.API)'
2025-04-05 19:07:58.108 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/Invoice/1/print-pdf - - - 200 58060 application/pdf 4551.4525ms
2025-04-05 19:08:17.986 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7257/api/orders/get-customer-of-order/1 - -
2025-04-05 19:08:17.990 +07:00 [INF] Executing endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.GetCustomerOfOrder (BepKhoiBackend.API)'
2025-04-05 19:08:18.002 +07:00 [INF] Route matched with {action = "GetCustomerOfOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomerOfOrder(Int32) on controller BepKhoiBackend.API.Controllers.OrderControllers.OrderController (BepKhoiBackend.API).
2025-04-05 19:08:18.136 +07:00 [INF] Entity Framework Core 6.0.0 initialized 'bepkhoiContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None
2025-04-05 19:08:18.221 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__orderId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[Order_id], [o].[Amount_due], [o].[Created_time], [o].[Customer_id], [o].[Delivery_information_id], [o].[Order_note], [o].[Order_status_id], [o].[Order_type_id], [o].[Room_id], [o].[Shipper_id], [o].[Total_quantity]
FROM [Order] AS [o]
WHERE [o].[Order_id] = @__orderId_0
2025-04-05 19:08:18.268 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__order_CustomerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Customer_id], [c].[Customer_name], [c].[isDelete], [c].[Phone]
FROM [Customer] AS [c]
WHERE [c].[Customer_id] = @__order_CustomerId_0
2025-04-05 19:08:18.277 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`2[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BepKhoiBackend.BusinessObject.dtos.CustomerDto.CustomerPosDto, BepKhoiBackend.BusinessObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-05 19:08:18.286 +07:00 [INF] Executed action BepKhoiBackend.API.Controllers.OrderControllers.OrderController.GetCustomerOfOrder (BepKhoiBackend.API) in 280.5836ms
2025-04-05 19:08:18.293 +07:00 [INF] Executed endpoint 'BepKhoiBackend.API.Controllers.OrderControllers.OrderController.GetCustomerOfOrder (BepKhoiBackend.API)'
2025-04-05 19:08:18.300 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7257/api/orders/get-customer-of-order/1 - - - 200 - application/json;+charset=utf-8 313.9151ms
